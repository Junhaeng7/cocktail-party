{"ast":null,"code":"import _slicedToArray from \"/Users/Junhaeng/untitled folder/junior-design/amplifyapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/Junhaeng/untitled folder/junior-design/amplifyapp/src/components/Spectrogramview.js\",\n  _this = this,\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from \"react\";\nimport WaveSurfer from \"wavesurfer.js\";\nimport SpectrogramPlugin from \"wavesurfer.js/src/plugin/spectrogram\";\nimport RegionsPlugin from \"wavesurfer.js/src/plugin/regions\";\n// import CursorPlugin from \"wavesurfer.js/src/plugin/cursor\";\n// import TimelinePlugin from \"wavesurfer.js/src/plugin/timeline\";\nimport createColormap from \"colormap\";\nimport \"./Spectrogramview.css\";\nimport PropTypes from \"prop-types\";\nimport { useLocation } from \"react-router-dom\";\nimport Button from \"./Button\";\n\n/* Mui imports for designing */\nimport { createTheme, ThemeProvider } from \"@mui/material/styles\";\nimport Box from \"@mui/material/Box\";\nimport Stack from \"@mui/material/Stack\";\nimport TextField from \"@mui/material/TextField\";\nimport Slider from \"@mui/material/Slider\";\nimport Radio from \"@mui/material/Radio\";\nimport { Button as MuiButton } from \"@mui/material\";\nimport ButtonGroup from \"@mui/material/ButtonGroup\";\nimport ToggleButton from \"@mui/material/ToggleButton\";\nimport ToggleButtonGroup from \"@mui/material/ToggleButtonGroup\";\nimport LinearProgress from \"@mui/material/LinearProgress\";\n\n/**Icons from  Mui */\nimport VolumeDown from \"@mui/icons-material/VolumeDown\";\nimport VolumeUp from \"@mui/icons-material/VolumeUp\";\nimport PlayArrowIcon from \"@mui/icons-material/PlayArrow\";\nimport PauseIcon from \"@mui/icons-material/Pause\";\nimport ZoomOutIcon from \"@mui/icons-material/ZoomOut\";\nimport ZoomInIcon from \"@mui/icons-material/ZoomIn\";\nimport { Container, Grid, IconButton } from \"@material-ui/core\";\nimport Storage from \"@aws-amplify/storage\";\nimport { Auth } from \"aws-amplify\";\nimport DynamoAccess from \"functions/dynamoaccess\";\n\n//TO DO: Take file and load regions into Wave\n\n//TO DO: Add Exporting Functionality\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar dyn = new DynamoAccess();\nvar theme = createTheme({\n  palette: {\n    type: \"dark\",\n    primary: {\n      main: \"#3f51b5\"\n    },\n    secondary: {\n      main: \"#f50057\"\n    }\n  }\n});\nvar colors = createColormap({\n  colormap: \"jet\",\n  nshades: 256,\n  format: \"float\"\n});\nconsole.log(colors);\nvar formWaveSurferOptions = function formWaveSurferOptions(ref) {\n  return {\n    container: ref,\n    waveColor: \"#FFFFFF\",\n    progressColor: \"blue\",\n    cursorColor: \"gray\",\n    barWidth: 1,\n    cursorWidth: 5,\n    responsive: true,\n    height: 256,\n    scrollParent: true,\n    fillParent: false,\n    // minPxPerSec: minPx,\n    // If true, normalize by the maximum peak instead of 1.0.\n    normalize: false,\n    // Use the PeakCache to improve rendering speed of large waveforms.\n    partialRender: false,\n    fftSamples: 512,\n    colorMap: colors,\n    plugins: [RegionsPlugin.create({\n      regionsMinLength: 0.01,\n      dragSelection: {\n        slop: 5\n      },\n      color: \"rgba(152,255,152,0.2)\"\n    }),\n    // TimelinePlugin.create({\n    //   container: \"#wave-timeline\",\n    // }),\n    SpectrogramPlugin.create({\n      container: \"#wave-spectrogram\",\n      labels: false,\n      deferInit: false,\n      colorMap: colors\n    })]\n  };\n};\n\n//Function that handles the rendering of spectrogram when component ismounted\nvar Spectrogramview = function Spectrogramview(_ref) {\n  _s();\n  var link = _ref.link,\n    filename = _ref.filename,\n    zoom = _ref.zoom;\n  var username;\n\n  // TODO: Looking at ways to use different authentication levels for Admins, Reviewers, Labelers, etc.\n  Auth.currentAuthenticatedUser().then(function (data) {\n    var idToken = data;\n    username = idToken.username;\n  }).catch(function (err) {\n    return console.log(err);\n  }); // Need to add alert if username doesnt exist for this user.\n\n  // const url = 'http://ia902606.us.archive.org/35/items/shortpoetry_047_librivox/song_cjrg_teasdale_64kb.mp3'\n\n  var waveformRef = useRef(null);\n  var wavesurfer = useRef(null);\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    ready = _useState2[0],\n    setReady = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    playing = _useState4[0],\n    setPlay = _useState4[1];\n  var _useState5 = useState(0.5),\n    _useState6 = _slicedToArray(_useState5, 2),\n    volume = _useState6[0],\n    setVolume = _useState6[1];\n  var _useState7 = useState(zoom),\n    _useState8 = _slicedToArray(_useState7, 2),\n    currZoom = _useState8[0],\n    setZoom = _useState8[1];\n  var _useState9 = useState([]),\n    _useState10 = _slicedToArray(_useState9, 2),\n    allRegions = _useState10[0],\n    setRegions = _useState10[1];\n  var _useState11 = useState(false),\n    _useState12 = _slicedToArray(_useState11, 2),\n    showForm = _useState12[0],\n    setShowForm = _useState12[1];\n\n  // let location = useLocation();\n\n  // if (location.state !== undefined) {\n  //   link = location.state.link;\n  //   filename = location.state.file;\n  // }\n\n  var changeReady = function changeReady() {\n    setReady(!ready);\n  };\n  var zoomChange = function zoomChange(event, newZoom) {\n    zoom = event.target.value;\n    setZoom(newZoom);\n  };\n  var controlZoom = function controlZoom(item) {\n    return {\n      checked: currZoom === item,\n      onChange: zoomChange,\n      value: item,\n      name: \"zoom-radio-button\",\n      inputProps: {\n        \"aria-label\": item\n      }\n    };\n  };\n\n  // function testDynamo() {\n  //   let dyn = new DynamoAccess();\n  //   console.log(\"Dynamo connecting...\");\n  //   dyn.connect().then((res) => dyn.listTables());\n  //   // dyn.listTables();\n  // }\n  // function testDynamoInsert() {\n  //   /* TO DO */\n  // }\n\n  useEffect(function () {\n    var script = document.createElement(\"script\");\n    script.src = \"/public/wavesurfer.js\";\n    script.async = true;\n    document.body.appendChild(script);\n    setPlay(false);\n    if (waveformRef.current) {\n      var options = formWaveSurferOptions(waveformRef.current);\n      wavesurfer.current = WaveSurfer.create(options);\n    }\n\n    //Will load open source poetry as default...\n    wavesurfer.current.load(link);\n    wavesurfer.current.on(\"ready\", function () {\n      wavesurfer.current.spectrogram.init();\n    });\n\n    // wavesurfer.current.on(\"ready\", function () {\n    //   if (wavesurfer.current) {\n    //     wavesurfer.current.setVolume(volume);\n    //     setVolume(volume);\n    //   }\n    //   if (allRegions) {\n    //     loadRegions(allRegions);\n    //   }\n    // });\n\n    console.log(wavesurfer);\n    // console.log(options);\n\n    wavesurfer.current.on(\"region-click\", function (region, e) {\n      console.log(region.start);\n      console.log(region.end);\n      e.stopPropagation();\n      // wavesurfer.current.\n      wavesurfer.current.play(region.start, region.end);\n      setPlay(!playing);\n    });\n    hideShowNote();\n    wavesurfer.current.on(\"region-click\", editAnnotation);\n    wavesurfer.current.on(\"region-update-end\", saveRegions);\n    wavesurfer.current.on(\"region-updated\", saveRegions);\n    wavesurfer.current.on(\"region-removed\", saveRegions);\n    wavesurfer.current.on(\"region-in\", showNote);\n    wavesurfer.current.on(\"region-out\", hideNote);\n    // Removes events, elements and disconnects Web Audio nodes.\n    // when component unmount\n    return function () {\n      return wavesurfer.current.destroy();\n    };\n  }, [link, currZoom]);\n  var handlePlayPause = function handlePlayPause() {\n    setPlay(!playing);\n    wavesurfer.current.playPause();\n  };\n  var handlePlay = function handlePlay() {\n    wavesurfer.current.play();\n  };\n  var handlePause = function handlePause() {\n    wavesurfer.current.pause();\n  };\n  var onVolumeChange = function onVolumeChange(e) {\n    var target = e.target;\n    var newVolume = +target.value;\n    if (newVolume) {\n      setVolume(newVolume);\n      wavesurfer.current.setVolume(newVolume || 1);\n    }\n  };\n  var onZoomChange = function onZoomChange(e) {\n    var target = e.target;\n    var newZoom = +target.value;\n    if (newZoom) {\n      wavesurfer.current.zoom(target.value);\n    }\n  };\n  function saveRegions() {\n    //  hideShowNote();\n    localStorage.regions = JSON.stringify(Object.keys(wavesurfer.current.regions.list).map(function (id) {\n      var region = wavesurfer.current.regions.list[id];\n      return {\n        start: region.start,\n        end: region.end,\n        attributes: region.attributes,\n        data: region.data\n      };\n    }));\n  }\n  function exportLabels() {\n    var tag = username.substr(0, 4);\n    var labels_to_string = \"\";\n    JSON.stringify(Object.keys(wavesurfer.current.regions.list).map(function (id) {\n      var region = wavesurfer.current.regions.list[id];\n      labels_to_string = labels_to_string + region.start + \"\\t\" + region.end + \"\\t\" + region.data.note + \"\\n\";\n      return {};\n    }));\n    console.log(labels_to_string);\n    Storage.put((\"exported_app_files\" + \"/\" + filename).replace(\".flac\", \"_\" + tag + \".txt\"),\n    //   JSON.stringify(\n    //     Object.keys(wavesurfer.current.regions.list).map(function(id) {\n    //         let region = wavesurfer.current.regions.list[id];\n\n    //         return {\n    //             start: region.start,\n    //             end: region.end,\n    //             attributes: region.attributes,\n    //             data: region.data\n    //         };\n    // }))\n    labels_to_string).then(function (result) {\n      return console.log(result);\n    }).catch(function (err) {\n      return console.log(err);\n    });\n  }\n\n  /**\n   * Load regions from storage.\n   */\n  function loadRegions(regions) {\n    regions.forEach(function (region) {\n      // region.color = randomColor(0.25);\n      wavesurfer.current.addRegion(region);\n    });\n  }\n  function hideShowNote() {\n    var label = document.getElementById(\"label-form\");\n    if (label.style.display === \"none\") {\n      label.style.display = \"block\";\n    } else {\n      label.style.display = \"none\";\n    }\n  }\n  function editAnnotation(region) {\n    hideShowNote();\n    var form = document.forms.edit;\n    form.style.opacity = 1;\n    form.elements.start.value = region.start * 100 / 100;\n    form.elements.end.value = region.end * 100 / 100;\n    form.elements.note.value = region.data.note || \"\";\n    form.onsubmit = function (e) {\n      hideShowNote();\n      e.preventDefault();\n      region.update({\n        start: form.elements.start.value,\n        end: form.elements.end.value,\n        data: {\n          note: form.elements.note.value\n        }\n      });\n      if (!allRegions) {\n        setRegions([region]);\n      } else {\n        var arr = allRegions;\n        arr[allRegions.length] = region;\n        setRegions(arr);\n      }\n      console.log(allRegions);\n      form.style.opacity = 0;\n    };\n    form.onreset = function () {\n      form.style.opacity = 0;\n      form.dataset.region = null;\n    };\n    form.dataset.region = region.id;\n  }\n  function showNote(region) {\n    if (!showNote.el) {\n      showNote.el = document.querySelector(\"#subtitle\");\n    }\n    showNote.el.style.color = \"Red\";\n    showNote.el.style.fontSize = \"large\";\n    showNote.el.textContent = region.data.note || \"–\";\n  }\n  function hideNote(region) {\n    if (!hideNote.el) {\n      hideNote.el = document.querySelector(\"#subtitle\");\n    }\n    hideNote.el.style.color = \"Red\";\n    hideNote.el.style.fontSize = \"large\";\n    hideNote.el.textContent = \"–\";\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"spectrogram\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fileName\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Current File: \", filename]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 378,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 377,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"upperControls\",\n      children: /*#__PURE__*/_jsxDEV(ThemeProvider, {\n        theme: theme,\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          direction: \"row\",\n          spacing: 8,\n          justifyContent: \"center\"\n          // spacing={2}\n          ,\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            children: /*#__PURE__*/_jsxDEV(ButtonGroup, {\n              variant: \"contained\",\n              \"aria-label\": \"outlined primary button group\",\n              children: [/*#__PURE__*/_jsxDEV(MuiButton, {\n                \"aria-label\": \"play\",\n                size: \"large\",\n                color: \"primary\",\n                onClick: handlePlay,\n                children: /*#__PURE__*/_jsxDEV(PlayArrowIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 400,\n                  columnNumber: 19\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 394,\n                columnNumber: 17\n              }, _this), /*#__PURE__*/_jsxDEV(MuiButton, {\n                \"aria-label\": \"pause\",\n                size: \"large\",\n                color: \"secondary\",\n                onClick: handlePause,\n                children: /*#__PURE__*/_jsxDEV(PauseIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 408,\n                  columnNumber: 19\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 402,\n                columnNumber: 17\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 390,\n              columnNumber: 15\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 389,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            children: /*#__PURE__*/_jsxDEV(MuiButton, {\n              color: \"secondary\",\n              variant: \"contained\",\n              size: \"large\",\n              onClick: exportLabels,\n              className: \"ExportBtn\",\n              children: \"Export\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 414,\n              columnNumber: 15\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 413,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 382,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 381,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 380,\n      columnNumber: 7\n    }, _this), \"dddd\", /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"waveform\",\n      ref: waveformRef,\n      className: \"audio_visual\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 428,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-sm-3\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 429,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"lowerControls\",\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: 8,\n        justifyContent: \"center\",\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          children: /*#__PURE__*/_jsxDEV(ToggleButtonGroup, {\n            \"aria-label\": \"outlined primary button group\",\n            color: \"secondary\",\n            value: currZoom,\n            exclusive: true,\n            onChange: zoomChange,\n            children: [/*#__PURE__*/_jsxDEV(ToggleButton, {\n              value: \"100\",\n              children: \"100px\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 440,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(ToggleButton, {\n              value: \"250\",\n              children: \"250px\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 441,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(ToggleButton, {\n              value: \"500\",\n              children: \"500px\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 442,\n              columnNumber: 15\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 433,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 432,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          children: /*#__PURE__*/_jsxDEV(Box, {\n            children: [/*#__PURE__*/_jsxDEV(VolumeDown, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 449,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(Slider, {\n              \"aria-label\": \"Volume\",\n              min: 0.01,\n              max: 1,\n              step: 0.025,\n              defaultValue: volume,\n              onChange: onVolumeChange,\n              sx: {\n                width: 100\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 450,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(VolumeUp, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 459,\n              columnNumber: 15\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 448,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 447,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 431,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 430,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n      id: \"subtitle\",\n      className: \"text-center text-info\",\n      children: \"\\xA0\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 465,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"form\", {\n      id: \"label-form\",\n      name: \"edit\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"col-sm-3 form-group region-times\",\n        children: [/*#__PURE__*/_jsxDEV(TextField, {\n          id: \"start\",\n          label: \"Region Start\",\n          defaultValue: \"\",\n          variant: \"outlined\",\n          size: \"small\",\n          InputProps: {\n            readOnly: true\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 472,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(TextField, {\n          id: \"end\",\n          label: \"Region End\",\n          defaultValue: \"\",\n          variant: \"outlined\",\n          size: \"small\",\n          InputProps: {\n            readOnly: true\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 484,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 469,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-sm-6 form-group\",\n        children: /*#__PURE__*/_jsxDEV(TextField, {\n          required: true,\n          id: \"note\",\n          name: \"note\",\n          className: \"form-control\",\n          label: \"Label\",\n          defaultValue: \"\",\n          helperText: \"Please add your annotation above\",\n          variant: \"filled\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 497,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 496,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-sm-3\",\n        id: \"save-delete\",\n        children: [/*#__PURE__*/_jsxDEV(\"center\", {\n          children: /*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"Region edit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 512,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 511,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(MuiButton, {\n          type: \"submit\",\n          onClick: function onClick() {\n            saveRegions();\n          },\n          className: \"btn btn-success btn-block\",\n          variant: \"contained\",\n          color: \"success\",\n          children: \"Save\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 514,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"center\", {\n          children: /*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"or\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 526,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 525,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(MuiButton, {\n          onClick: function onClick() {\n            var form = document.forms.edit;\n            var regionId = form.dataset.region;\n            if (regionId) {\n              wavesurfer.current.regions.list[regionId].remove();\n              form.reset();\n            }\n          },\n          className: \"btn btn-danger btn-block\",\n          variant: \"contained\",\n          color: \"error\",\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 528,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 510,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 468,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(MuiButton, {\n        onCLick: function onCLick() {},\n        children: \"Test DB Exporting\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 553,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 545,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 376,\n    columnNumber: 5\n  }, _this);\n};\n_s(Spectrogramview, \"gKzT8ILeqOy+slZ5I3y7vSDNpyg=\");\n_c = Spectrogramview;\nSpectrogramview.defaultProps = {\n  // location: {state: 'https://ia902606.us.archive.org/35/items/shortpoetry_047_librivox/song_cjrg_teasdale_64kb.mp3' }\n  link: \"https://ia902606.us.archive.org/35/items/shortpoetry_047_librivox/song_cjrg_teasdale_64kb.mp3\",\n  filename: \"3113.flac\",\n  zoom: 100\n};\nexport default Spectrogramview;\nvar _c;\n$RefreshReg$(_c, \"Spectrogramview\");","map":{"version":3,"names":["React","useEffect","useRef","useState","WaveSurfer","SpectrogramPlugin","RegionsPlugin","createColormap","PropTypes","useLocation","Button","createTheme","ThemeProvider","Box","Stack","TextField","Slider","Radio","MuiButton","ButtonGroup","ToggleButton","ToggleButtonGroup","LinearProgress","VolumeDown","VolumeUp","PlayArrowIcon","PauseIcon","ZoomOutIcon","ZoomInIcon","Container","Grid","IconButton","Storage","Auth","DynamoAccess","jsxDEV","_jsxDEV","dyn","theme","palette","type","primary","main","secondary","colors","colormap","nshades","format","console","log","formWaveSurferOptions","ref","container","waveColor","progressColor","cursorColor","barWidth","cursorWidth","responsive","height","scrollParent","fillParent","normalize","partialRender","fftSamples","colorMap","plugins","create","regionsMinLength","dragSelection","slop","color","labels","deferInit","Spectrogramview","_ref","_s","link","filename","zoom","username","currentAuthenticatedUser","then","data","idToken","catch","err","waveformRef","wavesurfer","_useState","_useState2","_slicedToArray","ready","setReady","_useState3","_useState4","playing","setPlay","_useState5","_useState6","volume","setVolume","_useState7","_useState8","currZoom","setZoom","_useState9","_useState10","allRegions","setRegions","_useState11","_useState12","showForm","setShowForm","changeReady","zoomChange","event","newZoom","target","value","controlZoom","item","checked","onChange","name","inputProps","script","document","createElement","src","async","body","appendChild","current","options","load","on","spectrogram","init","region","e","start","end","stopPropagation","play","hideShowNote","editAnnotation","saveRegions","showNote","hideNote","destroy","handlePlayPause","playPause","handlePlay","handlePause","pause","onVolumeChange","newVolume","onZoomChange","localStorage","regions","JSON","stringify","Object","keys","list","map","id","attributes","exportLabels","tag","substr","labels_to_string","note","put","replace","result","loadRegions","forEach","addRegion","label","getElementById","style","display","form","forms","edit","opacity","elements","onsubmit","preventDefault","update","arr","length","onreset","dataset","el","querySelector","fontSize","textContent","className","children","fileName","_jsxFileName","lineNumber","columnNumber","_this","direction","spacing","justifyContent","variant","size","onClick","exclusive","min","max","step","defaultValue","sx","width","class","InputProps","readOnly","required","helperText","regionId","remove","reset","onCLick","_c","defaultProps","$RefreshReg$"],"sources":["/Users/Junhaeng/untitled folder/junior-design/amplifyapp/src/components/Spectrogramview.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\n\nimport WaveSurfer from \"wavesurfer.js\";\nimport SpectrogramPlugin from \"wavesurfer.js/src/plugin/spectrogram\";\nimport RegionsPlugin from \"wavesurfer.js/src/plugin/regions\";\n// import CursorPlugin from \"wavesurfer.js/src/plugin/cursor\";\n// import TimelinePlugin from \"wavesurfer.js/src/plugin/timeline\";\nimport createColormap from \"colormap\";\nimport \"./Spectrogramview.css\";\nimport PropTypes from \"prop-types\";\nimport { useLocation } from \"react-router-dom\";\nimport Button from \"./Button\";\n\n/* Mui imports for designing */\nimport { createTheme, ThemeProvider } from \"@mui/material/styles\";\nimport Box from \"@mui/material/Box\";\nimport Stack from \"@mui/material/Stack\";\nimport TextField from \"@mui/material/TextField\";\nimport Slider from \"@mui/material/Slider\";\nimport Radio from \"@mui/material/Radio\";\nimport { Button as MuiButton } from \"@mui/material\";\nimport ButtonGroup from \"@mui/material/ButtonGroup\";\nimport ToggleButton from \"@mui/material/ToggleButton\";\nimport ToggleButtonGroup from \"@mui/material/ToggleButtonGroup\";\nimport LinearProgress from \"@mui/material/LinearProgress\";\n\n/**Icons from  Mui */\nimport VolumeDown from \"@mui/icons-material/VolumeDown\";\nimport VolumeUp from \"@mui/icons-material/VolumeUp\";\nimport PlayArrowIcon from \"@mui/icons-material/PlayArrow\";\nimport PauseIcon from \"@mui/icons-material/Pause\";\nimport ZoomOutIcon from \"@mui/icons-material/ZoomOut\";\nimport ZoomInIcon from \"@mui/icons-material/ZoomIn\";\nimport { Container, Grid, IconButton } from \"@material-ui/core\";\n\nimport Storage from \"@aws-amplify/storage\";\n\nimport { Auth } from \"aws-amplify\";\nimport DynamoAccess from \"functions/dynamoaccess\";\n\n//TO DO: Take file and load regions into Wave\n\n//TO DO: Add Exporting Functionality\nconst dyn = new DynamoAccess();\n\nconst theme = createTheme({\n  palette: {\n    type: \"dark\",\n    primary: {\n      main: \"#3f51b5\",\n    },\n    secondary: {\n      main: \"#f50057\",\n    },\n  },\n});\n\nconst colors = createColormap({\n  colormap: \"jet\",\n  nshades: 256,\n  format: \"float\",\n});\nconsole.log(colors);\nconst formWaveSurferOptions = (ref) => ({\n  container: ref,\n  waveColor: \"#FFFFFF\",\n  progressColor: \"blue\",\n  cursorColor: \"gray\",\n  barWidth: 1,\n  cursorWidth: 5,\n  responsive: true,\n  height: 256,\n  scrollParent: true,\n  fillParent: false,\n  // minPxPerSec: minPx,\n  // If true, normalize by the maximum peak instead of 1.0.\n  normalize: false,\n  // Use the PeakCache to improve rendering speed of large waveforms.\n  partialRender: false,\n  fftSamples: 512,\n  colorMap: colors,\n  plugins: [\n    RegionsPlugin.create({\n      regionsMinLength: 0.01,\n      dragSelection: {\n        slop: 5,\n      },\n      color: \"rgba(152,255,152,0.2)\",\n    }),\n    // TimelinePlugin.create({\n    //   container: \"#wave-timeline\",\n    // }),\n    SpectrogramPlugin.create({\n      container: \"#wave-spectrogram\",\n      labels: false,\n      deferInit: false,\n      colorMap: colors,\n    }),\n  ],\n});\n\n//Function that handles the rendering of spectrogram when component ismounted\nconst Spectrogramview = ({ link, filename, zoom }) => {\n  var username;\n\n  // TODO: Looking at ways to use different authentication levels for Admins, Reviewers, Labelers, etc.\n  Auth.currentAuthenticatedUser()\n    .then((data) => {\n      let idToken = data;\n      username = idToken.username;\n    })\n    .catch((err) => console.log(err)); // Need to add alert if username doesnt exist for this user.\n\n  // const url = 'http://ia902606.us.archive.org/35/items/shortpoetry_047_librivox/song_cjrg_teasdale_64kb.mp3'\n\n  const waveformRef = useRef(null);\n  const wavesurfer = useRef(null);\n  const [ready, setReady] = useState(false);\n  const [playing, setPlay] = useState(false);\n  const [volume, setVolume] = useState(0.5);\n  const [currZoom, setZoom] = useState(zoom);\n  const [allRegions, setRegions] = useState([]);\n  const [showForm, setShowForm] = useState(false);\n\n  // let location = useLocation();\n\n  // if (location.state !== undefined) {\n  //   link = location.state.link;\n  //   filename = location.state.file;\n  // }\n\n  const changeReady = () => {\n    setReady(!ready);\n  };\n\n  const zoomChange = (event, newZoom) => {\n    zoom = event.target.value;\n    setZoom(newZoom);\n  };\n\n  const controlZoom = (item) => ({\n    checked: currZoom === item,\n    onChange: zoomChange,\n    value: item,\n    name: \"zoom-radio-button\",\n    inputProps: { \"aria-label\": item },\n  });\n\n  // function testDynamo() {\n  //   let dyn = new DynamoAccess();\n  //   console.log(\"Dynamo connecting...\");\n  //   dyn.connect().then((res) => dyn.listTables());\n  //   // dyn.listTables();\n  // }\n  // function testDynamoInsert() {\n  //   /* TO DO */\n  // }\n\n  useEffect(() => {\n    const script = document.createElement(\"script\");\n    script.src = \"/public/wavesurfer.js\";\n    script.async = true;\n    document.body.appendChild(script);\n\n    setPlay(false);\n\n    if (waveformRef.current) {\n      const options = formWaveSurferOptions(waveformRef.current);\n      wavesurfer.current = WaveSurfer.create(options);\n    }\n\n    //Will load open source poetry as default...\n    wavesurfer.current.load(link);\n\n    wavesurfer.current.on(\"ready\", () => {\n      wavesurfer.current.spectrogram.init();\n    });\n\n    // wavesurfer.current.on(\"ready\", function () {\n    //   if (wavesurfer.current) {\n    //     wavesurfer.current.setVolume(volume);\n    //     setVolume(volume);\n    //   }\n    //   if (allRegions) {\n    //     loadRegions(allRegions);\n    //   }\n    // });\n\n    console.log(wavesurfer);\n    // console.log(options);\n\n    wavesurfer.current.on(\"region-click\", function (region, e) {\n      console.log(region.start);\n      console.log(region.end);\n      e.stopPropagation();\n      // wavesurfer.current.\n      wavesurfer.current.play(region.start, region.end);\n      setPlay(!playing);\n    });\n\n    hideShowNote();\n\n    wavesurfer.current.on(\"region-click\", editAnnotation);\n    wavesurfer.current.on(\"region-update-end\", saveRegions);\n    wavesurfer.current.on(\"region-updated\", saveRegions);\n    wavesurfer.current.on(\"region-removed\", saveRegions);\n    wavesurfer.current.on(\"region-in\", showNote);\n    wavesurfer.current.on(\"region-out\", hideNote);\n    // Removes events, elements and disconnects Web Audio nodes.\n    // when component unmount\n    return () => wavesurfer.current.destroy();\n  }, [link, currZoom]);\n\n  const handlePlayPause = () => {\n    setPlay(!playing);\n    wavesurfer.current.playPause();\n  };\n\n  const handlePlay = () => {\n    wavesurfer.current.play();\n  };\n\n  const handlePause = () => {\n    wavesurfer.current.pause();\n  };\n\n  const onVolumeChange = (e) => {\n    const { target } = e;\n    const newVolume = +target.value;\n\n    if (newVolume) {\n      setVolume(newVolume);\n      wavesurfer.current.setVolume(newVolume || 1);\n    }\n  };\n\n  const onZoomChange = (e) => {\n    const { target } = e;\n    const newZoom = +target.value;\n\n    if (newZoom) {\n      wavesurfer.current.zoom(target.value);\n    }\n  };\n\n  function saveRegions() {\n    //  hideShowNote();\n    localStorage.regions = JSON.stringify(\n      Object.keys(wavesurfer.current.regions.list).map(function (id) {\n        let region = wavesurfer.current.regions.list[id];\n        return {\n          start: region.start,\n          end: region.end,\n          attributes: region.attributes,\n          data: region.data,\n        };\n      })\n    );\n  }\n\n  function exportLabels() {\n    var tag = username.substr(0, 4);\n\n    var labels_to_string = \"\";\n\n    JSON.stringify(\n      Object.keys(wavesurfer.current.regions.list).map(function (id) {\n        let region = wavesurfer.current.regions.list[id];\n        labels_to_string =\n          labels_to_string +\n          region.start +\n          \"\\t\" +\n          region.end +\n          \"\\t\" +\n          region.data.note +\n          \"\\n\";\n        return {};\n      })\n    );\n    console.log(labels_to_string);\n    Storage.put(\n      (\"exported_app_files\" + \"/\" + filename).replace(\n        \".flac\",\n        \"_\" + tag + \".txt\"\n      ),\n      //   JSON.stringify(\n      //     Object.keys(wavesurfer.current.regions.list).map(function(id) {\n      //         let region = wavesurfer.current.regions.list[id];\n\n      //         return {\n      //             start: region.start,\n      //             end: region.end,\n      //             attributes: region.attributes,\n      //             data: region.data\n      //         };\n      // }))\n      labels_to_string\n    )\n      .then((result) => console.log(result))\n      .catch((err) => console.log(err));\n  }\n\n  /**\n   * Load regions from storage.\n   */\n  function loadRegions(regions) {\n    regions.forEach(function (region) {\n      // region.color = randomColor(0.25);\n      wavesurfer.current.addRegion(region);\n    });\n  }\n\n  function hideShowNote() {\n    let label = document.getElementById(\"label-form\");\n    if (label.style.display === \"none\") {\n      label.style.display = \"block\";\n    } else {\n      label.style.display = \"none\";\n    }\n  }\n\n  function editAnnotation(region) {\n    hideShowNote();\n\n    let form = document.forms.edit;\n    form.style.opacity = 1;\n    form.elements.start.value = (region.start * 100) / 100;\n    form.elements.end.value = (region.end * 100) / 100;\n    form.elements.note.value = region.data.note || \"\";\n    form.onsubmit = function (e) {\n      hideShowNote();\n      e.preventDefault();\n      region.update({\n        start: form.elements.start.value,\n        end: form.elements.end.value,\n        data: {\n          note: form.elements.note.value,\n        },\n      });\n      if (!allRegions) {\n        setRegions([region]);\n      } else {\n        var arr = allRegions;\n        arr[allRegions.length] = region;\n        setRegions(arr);\n      }\n      console.log(allRegions);\n      form.style.opacity = 0;\n    };\n    form.onreset = function () {\n      form.style.opacity = 0;\n      form.dataset.region = null;\n    };\n    form.dataset.region = region.id;\n  }\n\n  function showNote(region) {\n    if (!showNote.el) {\n      showNote.el = document.querySelector(\"#subtitle\");\n    }\n    showNote.el.style.color = \"Red\";\n    showNote.el.style.fontSize = \"large\";\n    showNote.el.textContent = region.data.note || \"–\";\n  }\n\n  function hideNote(region) {\n    if (!hideNote.el) {\n      hideNote.el = document.querySelector(\"#subtitle\");\n    }\n    hideNote.el.style.color = \"Red\";\n    hideNote.el.style.fontSize = \"large\";\n    hideNote.el.textContent = \"–\";\n  }\n\n  return (\n    <div className=\"spectrogram\">\n      <div className=\"fileName\">\n        <p>Current File: {filename}</p>\n      </div>\n      <div className=\"upperControls\">\n        <ThemeProvider theme={theme}>\n          <Grid\n            container\n            direction=\"row\"\n            spacing={8}\n            justifyContent=\"center\"\n            // spacing={2}\n          >\n            <Grid item>\n              <ButtonGroup\n                variant=\"contained\"\n                aria-label=\"outlined primary button group\"\n              >\n                <MuiButton\n                  aria-label=\"play\"\n                  size=\"large\"\n                  color=\"primary\"\n                  onClick={handlePlay}\n                >\n                  <PlayArrowIcon />\n                </MuiButton>\n                <MuiButton\n                  aria-label=\"pause\"\n                  size=\"large\"\n                  color=\"secondary\"\n                  onClick={handlePause}\n                >\n                  <PauseIcon />\n                </MuiButton>\n              </ButtonGroup>\n            </Grid>\n\n            <Grid item>\n              <MuiButton\n                color=\"secondary\"\n                variant=\"contained\"\n                size=\"large\"\n                onClick={exportLabels}\n                className=\"ExportBtn\"\n              >\n                Export\n              </MuiButton>\n            </Grid>\n          </Grid>\n        </ThemeProvider>\n      </div>\n      dddd\n      <div id=\"waveform\" ref={waveformRef} className=\"audio_visual\" />\n      <div className=\"col-sm-3\"></div>\n      <div className=\"lowerControls\">\n        <Grid container spacing={8} justifyContent=\"center\">\n          <Grid item>\n            <ToggleButtonGroup\n              aria-label=\"outlined primary button group\"\n              color=\"secondary\"\n              value={currZoom}\n              exclusive\n              onChange={zoomChange}\n            >\n              <ToggleButton value={\"100\"}>100px</ToggleButton>\n              <ToggleButton value={\"250\"}>250px</ToggleButton>\n              <ToggleButton value={\"500\"}>500px</ToggleButton>\n            </ToggleButtonGroup>\n            {/* </ Box> */}\n          </Grid>\n          {/* <Grid container spacing = {12}> */}\n          <Grid item>\n            <Box>\n              <VolumeDown />\n              <Slider\n                aria-label=\"Volume\"\n                min={0.01}\n                max={1}\n                step={0.025}\n                defaultValue={volume}\n                onChange={onVolumeChange}\n                sx={{ width: 100 }}\n              />\n              <VolumeUp />\n            </Box>\n          </Grid>\n        </Grid>\n      </div>\n      {/* The Below Form is using standard HTML w/ Javascript references. Not the Cleanest. Potential for improvement is to get into react style. */}\n      <p id=\"subtitle\" className=\"text-center text-info\">\n        &nbsp;\n      </p>\n      <form id=\"label-form\" name=\"edit\">\n        <div class=\"col-sm-3 form-group region-times\">\n          {/* <label for=\"start\">Begin</label>\n                    <input className=\"form-control\" id=\"start\" name=\"start\" /> */}\n          <TextField\n            id=\"start\"\n            label=\"Region Start\"\n            defaultValue=\"\"\n            variant=\"outlined\"\n            size=\"small\"\n            InputProps={{\n              readOnly: true,\n            }}\n          />\n          {/* <label for=\"end\">End</label> */}\n          {/* <input className=\"form-control\" id=\"end\" name=\"end\" /> */}\n          <TextField\n            id=\"end\"\n            label=\"Region End\"\n            defaultValue=\"\"\n            variant=\"outlined\"\n            size=\"small\"\n            InputProps={{\n              readOnly: true,\n            }}\n          />\n        </div>\n\n        <div className=\"col-sm-6 form-group\">\n          <TextField\n            required\n            id=\"note\"\n            name=\"note\"\n            className=\"form-control\"\n            label=\"Label\"\n            defaultValue=\"\"\n            helperText=\"Please add your annotation above\"\n            variant=\"filled\"\n          />\n          {/* <textarea id=\"note\" className=\"form-control\" rows=\"3\" name=\"note\"></textarea> */}\n        </div>\n\n        <div className=\"col-sm-3\" id=\"save-delete\">\n          <center>\n            <b>Region edit</b>\n          </center>\n          <MuiButton\n            type=\"submit\"\n            onClick={() => {\n              saveRegions();\n            }}\n            className=\"btn btn-success btn-block\"\n            variant=\"contained\"\n            color=\"success\"\n          >\n            Save\n          </MuiButton>\n          <center>\n            <b>or</b>\n          </center>\n          <MuiButton\n            onClick={() => {\n              let form = document.forms.edit;\n              let regionId = form.dataset.region;\n              if (regionId) {\n                wavesurfer.current.regions.list[regionId].remove();\n                form.reset();\n              }\n            }}\n            className=\"btn btn-danger btn-block\"\n            variant=\"contained\"\n            color=\"error\"\n          >\n            Delete\n          </MuiButton>\n        </div>\n      </form>\n      <div>\n        {/* <MuiButton\n          onClick={() => {\n            testDynamo();\n          }}\n        >\n          Test\n        </MuiButton> */}\n        <MuiButton onCLick={() => {}}>Test DB Exporting</MuiButton>\n      </div>\n    </div>\n  );\n};\nSpectrogramview.defaultProps = {\n  // location: {state: 'https://ia902606.us.archive.org/35/items/shortpoetry_047_librivox/song_cjrg_teasdale_64kb.mp3' }\n  link: \"https://ia902606.us.archive.org/35/items/shortpoetry_047_librivox/song_cjrg_teasdale_64kb.mp3\",\n\n  filename: \"3113.flac\",\n\n  zoom: 100,\n};\n\nexport default Spectrogramview;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}