{"ast":null,"code":"import _slicedToArray from \"/Users/Junhaeng/untitled folder/junior-design/amplifyapp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nvar _jsxFileName = \"/Users/Junhaeng/untitled folder/junior-design/amplifyapp/src/components/Spectrogramview.js\",\n  _this = this,\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from \"react\";\nimport WaveSurfer from \"wavesurfer.js\";\nimport SpectrogramPlugin from \"wavesurfer.js/src/plugin/spectrogram\";\nimport RegionsPlugin from \"wavesurfer.js/src/plugin/regions\";\n// import CursorPlugin from \"wavesurfer.js/src/plugin/cursor\";\n// import TimelinePlugin from \"wavesurfer.js/src/plugin/timeline\";\nimport createColormap from \"colormap\";\nimport \"./Spectrogramview.css\";\nimport PropTypes from \"prop-types\";\nimport { useLocation } from \"react-router-dom\";\nimport Button from \"./Button\";\n\n/* Mui imports for designing */\nimport { createTheme, ThemeProvider } from \"@mui/material/styles\";\nimport Box from \"@mui/material/Box\";\nimport Stack from \"@mui/material/Stack\";\nimport TextField from \"@mui/material/TextField\";\nimport Slider from \"@mui/material/Slider\";\nimport Radio from \"@mui/material/Radio\";\nimport { Button as MuiButton } from \"@mui/material\";\nimport ButtonGroup from \"@mui/material/ButtonGroup\";\nimport ToggleButton from \"@mui/material/ToggleButton\";\nimport ToggleButtonGroup from \"@mui/material/ToggleButtonGroup\";\nimport LinearProgress from \"@mui/material/LinearProgress\";\n\n/**Icons from  Mui */\nimport VolumeDown from \"@mui/icons-material/VolumeDown\";\nimport VolumeUp from \"@mui/icons-material/VolumeUp\";\nimport PlayArrowIcon from \"@mui/icons-material/PlayArrow\";\nimport PauseIcon from \"@mui/icons-material/Pause\";\nimport ZoomOutIcon from \"@mui/icons-material/ZoomOut\";\nimport ZoomInIcon from \"@mui/icons-material/ZoomIn\";\nimport { Container, Grid, IconButton } from \"@material-ui/core\";\nimport Storage from \"@aws-amplify/storage\";\nimport { Auth } from \"aws-amplify\";\nimport DynamoAccess from \"functions/dynamoaccess\";\n\n//TO DO: Take file and load regions into Wave\n\n//TO DO: Add Exporting Functionality\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar dyn = new DynamoAccess();\nvar theme = createTheme({\n  palette: {\n    type: \"dark\",\n    primary: {\n      main: \"#3f51b5\"\n    },\n    secondary: {\n      main: \"#f50057\"\n    }\n  }\n});\nvar colors = createColormap({\n  colormap: \"jet\",\n  nshades: 256,\n  format: \"float\"\n});\nconsole.log(colors);\nvar formWaveSurferOptions = function formWaveSurferOptions(ref, minPx) {\n  return {\n    container: ref,\n    waveColor: \"#FFFFFF\",\n    progressColor: \"blue\",\n    cursorColor: \"gray\",\n    barWidth: 1,\n    cursorWidth: 5,\n    responsive: true,\n    height: 256,\n    scrollParent: true,\n    fillParent: false,\n    minPxPerSec: minPx,\n    // If true, normalize by the maximum peak instead of 1.0.\n    normalize: false,\n    // Use the PeakCache to improve rendering speed of large waveforms.\n    partialRender: false,\n    fftSamples: 512,\n    colorMap: colors,\n    plugins: [RegionsPlugin.create({\n      regionsMinLength: 0.01,\n      dragSelection: {\n        slop: 5\n      },\n      color: \"rgba(152,255,152,0.2)\"\n    }),\n    // TimelinePlugin.create({\n    //   container: \"#wave-timeline\",\n    // }),\n    SpectrogramPlugin.create({\n      container: ref,\n      labels: false,\n      deferInit: false,\n      colorMap: colors\n    })]\n  };\n};\n\n//Function that handles the rendering of spectrogram when component ismounted\nvar Spectrogramview = function Spectrogramview(_ref) {\n  _s();\n  var link = _ref.link,\n    filename = _ref.filename,\n    zoom = _ref.zoom;\n  var username;\n\n  // TODO: Looking at ways to use different authentication levels for Admins, Reviewers, Labelers, etc.\n  // Auth.currentAuthenticatedUser()\n  //   .then((data) => {\n  //     let idToken = data;\n  //     username = idToken.username;\n  //   })\n  //   .catch((err) => console.log(err)); // Need to add alert if username doesnt exist for this user.\n\n  // const url = 'http://ia902606.us.archive.org/35/items/shortpoetry_047_librivox/song_cjrg_teasdale_64kb.mp3'\n\n  var waveformRef = useRef(null);\n  var wavesurfer = useRef(null);\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    ready = _useState2[0],\n    setReady = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    playing = _useState4[0],\n    setPlay = _useState4[1];\n  var _useState5 = useState(0.5),\n    _useState6 = _slicedToArray(_useState5, 2),\n    volume = _useState6[0],\n    setVolume = _useState6[1];\n  var _useState7 = useState(zoom),\n    _useState8 = _slicedToArray(_useState7, 2),\n    currZoom = _useState8[0],\n    setZoom = _useState8[1];\n  var _useState9 = useState([]),\n    _useState10 = _slicedToArray(_useState9, 2),\n    allRegions = _useState10[0],\n    setRegions = _useState10[1];\n  var _useState11 = useState(false),\n    _useState12 = _slicedToArray(_useState11, 2),\n    showForm = _useState12[0],\n    setShowForm = _useState12[1];\n\n  // let location = useLocation();\n\n  // if (location.state !== undefined) {\n  //   link = location.state.link;\n  //   filename = location.state.file;\n  // }\n\n  var changeReady = function changeReady() {\n    setReady(!ready);\n  };\n  var zoomChange = function zoomChange(event, newZoom) {\n    zoom = event.target.value;\n    setZoom(newZoom);\n  };\n  var controlZoom = function controlZoom(item) {\n    return {\n      checked: currZoom === item,\n      onChange: zoomChange,\n      value: item,\n      name: \"zoom-radio-button\",\n      inputProps: {\n        \"aria-label\": item\n      }\n    };\n  };\n\n  // function testDynamo() {\n  //   let dyn = new DynamoAccess();\n  //   console.log(\"Dynamo connecting...\");\n  //   dyn.connect().then((res) => dyn.listTables());\n  //   // dyn.listTables();\n  // }\n  // function testDynamoInsert() {\n  //   /* TO DO */\n  // }\n\n  useEffect(function () {\n    var script = document.createElement(\"script\");\n    script.src = \"/public/wavesurfer.js\";\n    script.async = true;\n    document.body.appendChild(script);\n    setPlay(false);\n    var options = formWaveSurferOptions(waveformRef.current, currZoom);\n    wavesurfer.current = WaveSurfer.create(options);\n\n    //Will load open source poetry as default...\n    wavesurfer.current.load(\"/file_example_MP3_700KB.mp3\");\n\n    // wavesurfer.current.on(\"ready\", () => {\n    //   wavesurfer.current.spectrogram.init();\n    // });\n\n    wavesurfer.current.on(\"ready\", function () {\n      if (wavesurfer.current) {\n        wavesurfer.current.setVolume(volume);\n        setVolume(volume);\n      }\n      if (allRegions) {\n        loadRegions(allRegions);\n      }\n    });\n    console.log(wavesurfer);\n    // console.log(options);\n\n    wavesurfer.current.on(\"region-click\", function (region, e) {\n      console.log(region.start);\n      console.log(region.end);\n      e.stopPropagation();\n      // wavesurfer.current.\n      wavesurfer.current.play(region.start, region.end);\n      setPlay(!playing);\n    });\n    hideShowNote();\n    wavesurfer.current.on(\"region-click\", editAnnotation);\n    wavesurfer.current.on(\"region-update-end\", saveRegions);\n    wavesurfer.current.on(\"region-updated\", saveRegions);\n    wavesurfer.current.on(\"region-removed\", saveRegions);\n    wavesurfer.current.on(\"region-in\", showNote);\n    wavesurfer.current.on(\"region-out\", hideNote);\n    // Removes events, elements and disconnects Web Audio nodes.\n    // when component unmount\n    return function () {\n      return wavesurfer.current.destroy();\n    };\n  }, [link, currZoom]);\n  var handlePlayPause = function handlePlayPause() {\n    setPlay(!playing);\n    wavesurfer.current.playPause();\n  };\n  var handlePlay = function handlePlay() {\n    wavesurfer.current.play();\n  };\n  var handlePause = function handlePause() {\n    wavesurfer.current.pause();\n  };\n  var onVolumeChange = function onVolumeChange(e) {\n    var target = e.target;\n    var newVolume = +target.value;\n    if (newVolume) {\n      setVolume(newVolume);\n      wavesurfer.current.setVolume(newVolume || 1);\n    }\n  };\n  var onZoomChange = function onZoomChange(e) {\n    var target = e.target;\n    var newZoom = +target.value;\n    if (newZoom) {\n      wavesurfer.current.zoom(target.value);\n    }\n  };\n  function saveRegions() {\n    //  hideShowNote();\n    localStorage.regions = JSON.stringify(Object.keys(wavesurfer.current.regions.list).map(function (id) {\n      var region = wavesurfer.current.regions.list[id];\n      return {\n        start: region.start,\n        end: region.end,\n        attributes: region.attributes,\n        data: region.data\n      };\n    }));\n  }\n  function exportLabels() {\n    var tag = username.substr(0, 4);\n    var labels_to_string = \"\";\n    JSON.stringify(Object.keys(wavesurfer.current.regions.list).map(function (id) {\n      var region = wavesurfer.current.regions.list[id];\n      labels_to_string = labels_to_string + region.start + \"\\t\" + region.end + \"\\t\" + region.data.note + \"\\n\";\n      return {};\n    }));\n    console.log(labels_to_string);\n    Storage.put((\"exported_app_files\" + \"/\" + filename).replace(\".flac\", \"_\" + tag + \".txt\"),\n    //   JSON.stringify(\n    //     Object.keys(wavesurfer.current.regions.list).map(function(id) {\n    //         let region = wavesurfer.current.regions.list[id];\n\n    //         return {\n    //             start: region.start,\n    //             end: region.end,\n    //             attributes: region.attributes,\n    //             data: region.data\n    //         };\n    // }))\n    labels_to_string).then(function (result) {\n      return console.log(result);\n    }).catch(function (err) {\n      return console.log(err);\n    });\n  }\n\n  /**\n   * Load regions from storage.\n   */\n  function loadRegions(regions) {\n    regions.forEach(function (region) {\n      // region.color = randomColor(0.25);\n      wavesurfer.current.addRegion(region);\n    });\n  }\n  function hideShowNote() {\n    var label = document.getElementById(\"label-form\");\n    if (label.style.display === \"none\") {\n      label.style.display = \"block\";\n    } else {\n      label.style.display = \"none\";\n    }\n  }\n  function editAnnotation(region) {\n    hideShowNote();\n    var form = document.forms.edit;\n    form.style.opacity = 1;\n    form.elements.start.value = region.start * 100 / 100;\n    form.elements.end.value = region.end * 100 / 100;\n    form.elements.note.value = region.data.note || \"\";\n    form.onsubmit = function (e) {\n      hideShowNote();\n      e.preventDefault();\n      region.update({\n        start: form.elements.start.value,\n        end: form.elements.end.value,\n        data: {\n          note: form.elements.note.value\n        }\n      });\n      if (!allRegions) {\n        setRegions([region]);\n      } else {\n        var arr = allRegions;\n        arr[allRegions.length] = region;\n        setRegions(arr);\n      }\n      console.log(allRegions);\n      form.style.opacity = 0;\n    };\n    form.onreset = function () {\n      form.style.opacity = 0;\n      form.dataset.region = null;\n    };\n    form.dataset.region = region.id;\n  }\n  function showNote(region) {\n    if (!showNote.el) {\n      showNote.el = document.querySelector(\"#subtitle\");\n    }\n    showNote.el.style.color = \"Red\";\n    showNote.el.style.fontSize = \"large\";\n    showNote.el.textContent = region.data.note || \"–\";\n  }\n  function hideNote(region) {\n    if (!hideNote.el) {\n      hideNote.el = document.querySelector(\"#subtitle\");\n    }\n    hideNote.el.style.color = \"Red\";\n    hideNote.el.style.fontSize = \"large\";\n    hideNote.el.textContent = \"–\";\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"spectrogram\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fileName\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Current File: \", filename]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 376,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 375,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"upperControls\",\n      children: /*#__PURE__*/_jsxDEV(ThemeProvider, {\n        theme: theme,\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          direction: \"row\",\n          spacing: 8,\n          justifyContent: \"center\"\n          // spacing={2}\n          ,\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            children: /*#__PURE__*/_jsxDEV(ButtonGroup, {\n              variant: \"contained\",\n              \"aria-label\": \"outlined primary button group\",\n              children: [/*#__PURE__*/_jsxDEV(MuiButton, {\n                \"aria-label\": \"play\",\n                size: \"large\",\n                color: \"primary\",\n                onClick: handlePlay,\n                children: /*#__PURE__*/_jsxDEV(PlayArrowIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 398,\n                  columnNumber: 19\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 392,\n                columnNumber: 17\n              }, _this), /*#__PURE__*/_jsxDEV(MuiButton, {\n                \"aria-label\": \"pause\",\n                size: \"large\",\n                color: \"secondary\",\n                onClick: handlePause,\n                children: /*#__PURE__*/_jsxDEV(PauseIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 406,\n                  columnNumber: 19\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 400,\n                columnNumber: 17\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 388,\n              columnNumber: 15\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 387,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            children: /*#__PURE__*/_jsxDEV(MuiButton, {\n              color: \"secondary\",\n              variant: \"contained\",\n              size: \"large\",\n              onClick: exportLabels,\n              className: \"ExportBtn\",\n              children: \"Export\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 412,\n              columnNumber: 15\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 411,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 380,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 379,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 378,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"waveform\",\n      ref: waveformRef,\n      className: \"audio_visual\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 425,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-sm-3\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 426,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"lowerControls\",\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: 8,\n        justifyContent: \"center\",\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          children: /*#__PURE__*/_jsxDEV(ToggleButtonGroup, {\n            \"aria-label\": \"outlined primary button group\",\n            color: \"secondary\",\n            value: currZoom,\n            exclusive: true,\n            onChange: zoomChange,\n            children: [/*#__PURE__*/_jsxDEV(ToggleButton, {\n              value: \"100\",\n              children: \"100px\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 437,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(ToggleButton, {\n              value: \"250\",\n              children: \"250px\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 438,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(ToggleButton, {\n              value: \"500\",\n              children: \"500px\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 439,\n              columnNumber: 15\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 430,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 429,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          children: /*#__PURE__*/_jsxDEV(Box, {\n            children: [/*#__PURE__*/_jsxDEV(VolumeDown, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 446,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(Slider, {\n              \"aria-label\": \"Volume\",\n              min: 0.01,\n              max: 1,\n              step: 0.025,\n              defaultValue: volume,\n              onChange: onVolumeChange,\n              sx: {\n                width: 100\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 447,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(VolumeUp, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 456,\n              columnNumber: 15\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 445,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 444,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 428,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 427,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n      id: \"subtitle\",\n      className: \"text-center text-info\",\n      children: \"\\xA0\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 462,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"form\", {\n      id: \"label-form\",\n      name: \"edit\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"col-sm-3 form-group region-times\",\n        children: [/*#__PURE__*/_jsxDEV(TextField, {\n          id: \"start\",\n          label: \"Region Start\",\n          defaultValue: \"\",\n          variant: \"outlined\",\n          size: \"small\",\n          InputProps: {\n            readOnly: true\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 469,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(TextField, {\n          id: \"end\",\n          label: \"Region End\",\n          defaultValue: \"\",\n          variant: \"outlined\",\n          size: \"small\",\n          InputProps: {\n            readOnly: true\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 481,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 466,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-sm-6 form-group\",\n        children: /*#__PURE__*/_jsxDEV(TextField, {\n          required: true,\n          id: \"note\",\n          name: \"note\",\n          className: \"form-control\",\n          label: \"Label\",\n          defaultValue: \"\",\n          helperText: \"Please add your annotation above\",\n          variant: \"filled\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 494,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 493,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-sm-3\",\n        id: \"save-delete\",\n        children: [/*#__PURE__*/_jsxDEV(\"center\", {\n          children: /*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"Region edit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 509,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 508,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(MuiButton, {\n          type: \"submit\",\n          onClick: function onClick() {\n            saveRegions();\n          },\n          className: \"btn btn-success btn-block\",\n          variant: \"contained\",\n          color: \"success\",\n          children: \"Save\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 511,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"center\", {\n          children: /*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"or\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 523,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 522,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(MuiButton, {\n          onClick: function onClick() {\n            var form = document.forms.edit;\n            var regionId = form.dataset.region;\n            if (regionId) {\n              wavesurfer.current.regions.list[regionId].remove();\n              form.reset();\n            }\n          },\n          className: \"btn btn-danger btn-block\",\n          variant: \"contained\",\n          color: \"error\",\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 525,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 507,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 465,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(MuiButton, {\n        onCLick: function onCLick() {},\n        children: \"Test DB Exporting\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 550,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 542,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 374,\n    columnNumber: 5\n  }, _this);\n};\n_s(Spectrogramview, \"gKzT8ILeqOy+slZ5I3y7vSDNpyg=\");\n_c = Spectrogramview;\nSpectrogramview.defaultProps = {\n  // location: {state: 'https://ia902606.us.archive.org/35/items/shortpoetry_047_librivox/song_cjrg_teasdale_64kb.mp3' }\n  link: \"https://ia902606.us.archive.org/35/items/shortpoetry_047_librivox/song_cjrg_teasdale_64kb.mp3\",\n  filename: \"3113.flac\",\n  zoom: 100\n};\nexport default Spectrogramview;\nvar _c;\n$RefreshReg$(_c, \"Spectrogramview\");","map":{"version":3,"names":["React","useEffect","useRef","useState","WaveSurfer","SpectrogramPlugin","RegionsPlugin","createColormap","PropTypes","useLocation","Button","createTheme","ThemeProvider","Box","Stack","TextField","Slider","Radio","MuiButton","ButtonGroup","ToggleButton","ToggleButtonGroup","LinearProgress","VolumeDown","VolumeUp","PlayArrowIcon","PauseIcon","ZoomOutIcon","ZoomInIcon","Container","Grid","IconButton","Storage","Auth","DynamoAccess","jsxDEV","_jsxDEV","dyn","theme","palette","type","primary","main","secondary","colors","colormap","nshades","format","console","log","formWaveSurferOptions","ref","minPx","container","waveColor","progressColor","cursorColor","barWidth","cursorWidth","responsive","height","scrollParent","fillParent","minPxPerSec","normalize","partialRender","fftSamples","colorMap","plugins","create","regionsMinLength","dragSelection","slop","color","labels","deferInit","Spectrogramview","_ref","_s","link","filename","zoom","username","waveformRef","wavesurfer","_useState","_useState2","_slicedToArray","ready","setReady","_useState3","_useState4","playing","setPlay","_useState5","_useState6","volume","setVolume","_useState7","_useState8","currZoom","setZoom","_useState9","_useState10","allRegions","setRegions","_useState11","_useState12","showForm","setShowForm","changeReady","zoomChange","event","newZoom","target","value","controlZoom","item","checked","onChange","name","inputProps","script","document","createElement","src","async","body","appendChild","options","current","load","on","loadRegions","region","e","start","end","stopPropagation","play","hideShowNote","editAnnotation","saveRegions","showNote","hideNote","destroy","handlePlayPause","playPause","handlePlay","handlePause","pause","onVolumeChange","newVolume","onZoomChange","localStorage","regions","JSON","stringify","Object","keys","list","map","id","attributes","data","exportLabels","tag","substr","labels_to_string","note","put","replace","then","result","catch","err","forEach","addRegion","label","getElementById","style","display","form","forms","edit","opacity","elements","onsubmit","preventDefault","update","arr","length","onreset","dataset","el","querySelector","fontSize","textContent","className","children","fileName","_jsxFileName","lineNumber","columnNumber","_this","direction","spacing","justifyContent","variant","size","onClick","exclusive","min","max","step","defaultValue","sx","width","class","InputProps","readOnly","required","helperText","regionId","remove","reset","onCLick","_c","defaultProps","$RefreshReg$"],"sources":["/Users/Junhaeng/untitled folder/junior-design/amplifyapp/src/components/Spectrogramview.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\n\nimport WaveSurfer from \"wavesurfer.js\";\nimport SpectrogramPlugin from \"wavesurfer.js/src/plugin/spectrogram\";\nimport RegionsPlugin from \"wavesurfer.js/src/plugin/regions\";\n// import CursorPlugin from \"wavesurfer.js/src/plugin/cursor\";\n// import TimelinePlugin from \"wavesurfer.js/src/plugin/timeline\";\nimport createColormap from \"colormap\";\nimport \"./Spectrogramview.css\";\nimport PropTypes from \"prop-types\";\nimport { useLocation } from \"react-router-dom\";\nimport Button from \"./Button\";\n\n/* Mui imports for designing */\nimport { createTheme, ThemeProvider } from \"@mui/material/styles\";\nimport Box from \"@mui/material/Box\";\nimport Stack from \"@mui/material/Stack\";\nimport TextField from \"@mui/material/TextField\";\nimport Slider from \"@mui/material/Slider\";\nimport Radio from \"@mui/material/Radio\";\nimport { Button as MuiButton } from \"@mui/material\";\nimport ButtonGroup from \"@mui/material/ButtonGroup\";\nimport ToggleButton from \"@mui/material/ToggleButton\";\nimport ToggleButtonGroup from \"@mui/material/ToggleButtonGroup\";\nimport LinearProgress from \"@mui/material/LinearProgress\";\n\n/**Icons from  Mui */\nimport VolumeDown from \"@mui/icons-material/VolumeDown\";\nimport VolumeUp from \"@mui/icons-material/VolumeUp\";\nimport PlayArrowIcon from \"@mui/icons-material/PlayArrow\";\nimport PauseIcon from \"@mui/icons-material/Pause\";\nimport ZoomOutIcon from \"@mui/icons-material/ZoomOut\";\nimport ZoomInIcon from \"@mui/icons-material/ZoomIn\";\nimport { Container, Grid, IconButton } from \"@material-ui/core\";\n\nimport Storage from \"@aws-amplify/storage\";\n\nimport { Auth } from \"aws-amplify\";\nimport DynamoAccess from \"functions/dynamoaccess\";\n\n//TO DO: Take file and load regions into Wave\n\n//TO DO: Add Exporting Functionality\nconst dyn = new DynamoAccess();\n\nconst theme = createTheme({\n  palette: {\n    type: \"dark\",\n    primary: {\n      main: \"#3f51b5\",\n    },\n    secondary: {\n      main: \"#f50057\",\n    },\n  },\n});\n\nconst colors = createColormap({\n  colormap: \"jet\",\n  nshades: 256,\n  format: \"float\",\n});\nconsole.log(colors);\nconst formWaveSurferOptions = (ref, minPx) => ({\n  container: ref,\n  waveColor: \"#FFFFFF\",\n  progressColor: \"blue\",\n  cursorColor: \"gray\",\n  barWidth: 1,\n  cursorWidth: 5,\n  responsive: true,\n  height: 256,\n  scrollParent: true,\n  fillParent: false,\n  minPxPerSec: minPx,\n  // If true, normalize by the maximum peak instead of 1.0.\n  normalize: false,\n  // Use the PeakCache to improve rendering speed of large waveforms.\n  partialRender: false,\n  fftSamples: 512,\n  colorMap: colors,\n  plugins: [\n    RegionsPlugin.create({\n      regionsMinLength: 0.01,\n      dragSelection: {\n        slop: 5,\n      },\n      color: \"rgba(152,255,152,0.2)\",\n    }),\n    // TimelinePlugin.create({\n    //   container: \"#wave-timeline\",\n    // }),\n    SpectrogramPlugin.create({\n      container: ref,\n      labels: false,\n      deferInit: false,\n      colorMap: colors,\n    }),\n  ],\n});\n\n//Function that handles the rendering of spectrogram when component ismounted\nconst Spectrogramview = ({ link, filename, zoom }) => {\n  var username;\n\n  // TODO: Looking at ways to use different authentication levels for Admins, Reviewers, Labelers, etc.\n  // Auth.currentAuthenticatedUser()\n  //   .then((data) => {\n  //     let idToken = data;\n  //     username = idToken.username;\n  //   })\n  //   .catch((err) => console.log(err)); // Need to add alert if username doesnt exist for this user.\n\n  // const url = 'http://ia902606.us.archive.org/35/items/shortpoetry_047_librivox/song_cjrg_teasdale_64kb.mp3'\n\n  const waveformRef = useRef(null);\n  const wavesurfer = useRef(null);\n  const [ready, setReady] = useState(false);\n  const [playing, setPlay] = useState(false);\n  const [volume, setVolume] = useState(0.5);\n  const [currZoom, setZoom] = useState(zoom);\n  const [allRegions, setRegions] = useState([]);\n  const [showForm, setShowForm] = useState(false);\n\n  // let location = useLocation();\n\n  // if (location.state !== undefined) {\n  //   link = location.state.link;\n  //   filename = location.state.file;\n  // }\n\n  const changeReady = () => {\n    setReady(!ready);\n  };\n\n  const zoomChange = (event, newZoom) => {\n    zoom = event.target.value;\n    setZoom(newZoom);\n  };\n\n  const controlZoom = (item) => ({\n    checked: currZoom === item,\n    onChange: zoomChange,\n    value: item,\n    name: \"zoom-radio-button\",\n    inputProps: { \"aria-label\": item },\n  });\n\n  // function testDynamo() {\n  //   let dyn = new DynamoAccess();\n  //   console.log(\"Dynamo connecting...\");\n  //   dyn.connect().then((res) => dyn.listTables());\n  //   // dyn.listTables();\n  // }\n  // function testDynamoInsert() {\n  //   /* TO DO */\n  // }\n\n  useEffect(() => {\n    const script = document.createElement(\"script\");\n    script.src = \"/public/wavesurfer.js\";\n    script.async = true;\n    document.body.appendChild(script);\n\n    setPlay(false);\n\n    const options = formWaveSurferOptions(waveformRef.current, currZoom);\n    wavesurfer.current = WaveSurfer.create(options);\n\n    //Will load open source poetry as default...\n    wavesurfer.current.load(\"/file_example_MP3_700KB.mp3\");\n\n    // wavesurfer.current.on(\"ready\", () => {\n    //   wavesurfer.current.spectrogram.init();\n    // });\n\n    wavesurfer.current.on(\"ready\", function () {\n      if (wavesurfer.current) {\n        wavesurfer.current.setVolume(volume);\n        setVolume(volume);\n      }\n      if (allRegions) {\n        loadRegions(allRegions);\n      }\n    });\n\n    console.log(wavesurfer);\n    // console.log(options);\n\n    wavesurfer.current.on(\"region-click\", function (region, e) {\n      console.log(region.start);\n      console.log(region.end);\n      e.stopPropagation();\n      // wavesurfer.current.\n      wavesurfer.current.play(region.start, region.end);\n      setPlay(!playing);\n    });\n\n    hideShowNote();\n\n    wavesurfer.current.on(\"region-click\", editAnnotation);\n    wavesurfer.current.on(\"region-update-end\", saveRegions);\n    wavesurfer.current.on(\"region-updated\", saveRegions);\n    wavesurfer.current.on(\"region-removed\", saveRegions);\n    wavesurfer.current.on(\"region-in\", showNote);\n    wavesurfer.current.on(\"region-out\", hideNote);\n    // Removes events, elements and disconnects Web Audio nodes.\n    // when component unmount\n    return () => wavesurfer.current.destroy();\n  }, [link, currZoom]);\n\n  const handlePlayPause = () => {\n    setPlay(!playing);\n    wavesurfer.current.playPause();\n  };\n\n  const handlePlay = () => {\n    wavesurfer.current.play();\n  };\n\n  const handlePause = () => {\n    wavesurfer.current.pause();\n  };\n\n  const onVolumeChange = (e) => {\n    const { target } = e;\n    const newVolume = +target.value;\n\n    if (newVolume) {\n      setVolume(newVolume);\n      wavesurfer.current.setVolume(newVolume || 1);\n    }\n  };\n\n  const onZoomChange = (e) => {\n    const { target } = e;\n    const newZoom = +target.value;\n\n    if (newZoom) {\n      wavesurfer.current.zoom(target.value);\n    }\n  };\n\n  function saveRegions() {\n    //  hideShowNote();\n    localStorage.regions = JSON.stringify(\n      Object.keys(wavesurfer.current.regions.list).map(function (id) {\n        let region = wavesurfer.current.regions.list[id];\n        return {\n          start: region.start,\n          end: region.end,\n          attributes: region.attributes,\n          data: region.data,\n        };\n      })\n    );\n  }\n\n  function exportLabels() {\n    var tag = username.substr(0, 4);\n\n    var labels_to_string = \"\";\n\n    JSON.stringify(\n      Object.keys(wavesurfer.current.regions.list).map(function (id) {\n        let region = wavesurfer.current.regions.list[id];\n        labels_to_string =\n          labels_to_string +\n          region.start +\n          \"\\t\" +\n          region.end +\n          \"\\t\" +\n          region.data.note +\n          \"\\n\";\n        return {};\n      })\n    );\n    console.log(labels_to_string);\n    Storage.put(\n      (\"exported_app_files\" + \"/\" + filename).replace(\n        \".flac\",\n        \"_\" + tag + \".txt\"\n      ),\n      //   JSON.stringify(\n      //     Object.keys(wavesurfer.current.regions.list).map(function(id) {\n      //         let region = wavesurfer.current.regions.list[id];\n\n      //         return {\n      //             start: region.start,\n      //             end: region.end,\n      //             attributes: region.attributes,\n      //             data: region.data\n      //         };\n      // }))\n      labels_to_string\n    )\n      .then((result) => console.log(result))\n      .catch((err) => console.log(err));\n  }\n\n  /**\n   * Load regions from storage.\n   */\n  function loadRegions(regions) {\n    regions.forEach(function (region) {\n      // region.color = randomColor(0.25);\n      wavesurfer.current.addRegion(region);\n    });\n  }\n\n  function hideShowNote() {\n    let label = document.getElementById(\"label-form\");\n    if (label.style.display === \"none\") {\n      label.style.display = \"block\";\n    } else {\n      label.style.display = \"none\";\n    }\n  }\n\n  function editAnnotation(region) {\n    hideShowNote();\n\n    let form = document.forms.edit;\n    form.style.opacity = 1;\n    form.elements.start.value = (region.start * 100) / 100;\n    form.elements.end.value = (region.end * 100) / 100;\n    form.elements.note.value = region.data.note || \"\";\n    form.onsubmit = function (e) {\n      hideShowNote();\n      e.preventDefault();\n      region.update({\n        start: form.elements.start.value,\n        end: form.elements.end.value,\n        data: {\n          note: form.elements.note.value,\n        },\n      });\n      if (!allRegions) {\n        setRegions([region]);\n      } else {\n        var arr = allRegions;\n        arr[allRegions.length] = region;\n        setRegions(arr);\n      }\n      console.log(allRegions);\n      form.style.opacity = 0;\n    };\n    form.onreset = function () {\n      form.style.opacity = 0;\n      form.dataset.region = null;\n    };\n    form.dataset.region = region.id;\n  }\n\n  function showNote(region) {\n    if (!showNote.el) {\n      showNote.el = document.querySelector(\"#subtitle\");\n    }\n    showNote.el.style.color = \"Red\";\n    showNote.el.style.fontSize = \"large\";\n    showNote.el.textContent = region.data.note || \"–\";\n  }\n\n  function hideNote(region) {\n    if (!hideNote.el) {\n      hideNote.el = document.querySelector(\"#subtitle\");\n    }\n    hideNote.el.style.color = \"Red\";\n    hideNote.el.style.fontSize = \"large\";\n    hideNote.el.textContent = \"–\";\n  }\n\n  return (\n    <div className=\"spectrogram\">\n      <div className=\"fileName\">\n        <p>Current File: {filename}</p>\n      </div>\n      <div className=\"upperControls\">\n        <ThemeProvider theme={theme}>\n          <Grid\n            container\n            direction=\"row\"\n            spacing={8}\n            justifyContent=\"center\"\n            // spacing={2}\n          >\n            <Grid item>\n              <ButtonGroup\n                variant=\"contained\"\n                aria-label=\"outlined primary button group\"\n              >\n                <MuiButton\n                  aria-label=\"play\"\n                  size=\"large\"\n                  color=\"primary\"\n                  onClick={handlePlay}\n                >\n                  <PlayArrowIcon />\n                </MuiButton>\n                <MuiButton\n                  aria-label=\"pause\"\n                  size=\"large\"\n                  color=\"secondary\"\n                  onClick={handlePause}\n                >\n                  <PauseIcon />\n                </MuiButton>\n              </ButtonGroup>\n            </Grid>\n\n            <Grid item>\n              <MuiButton\n                color=\"secondary\"\n                variant=\"contained\"\n                size=\"large\"\n                onClick={exportLabels}\n                className=\"ExportBtn\"\n              >\n                Export\n              </MuiButton>\n            </Grid>\n          </Grid>\n        </ThemeProvider>\n      </div>\n      <div id=\"waveform\" ref={waveformRef} className=\"audio_visual\" />\n      <div className=\"col-sm-3\"></div>\n      <div className=\"lowerControls\">\n        <Grid container spacing={8} justifyContent=\"center\">\n          <Grid item>\n            <ToggleButtonGroup\n              aria-label=\"outlined primary button group\"\n              color=\"secondary\"\n              value={currZoom}\n              exclusive\n              onChange={zoomChange}\n            >\n              <ToggleButton value={\"100\"}>100px</ToggleButton>\n              <ToggleButton value={\"250\"}>250px</ToggleButton>\n              <ToggleButton value={\"500\"}>500px</ToggleButton>\n            </ToggleButtonGroup>\n            {/* </ Box> */}\n          </Grid>\n          {/* <Grid container spacing = {12}> */}\n          <Grid item>\n            <Box>\n              <VolumeDown />\n              <Slider\n                aria-label=\"Volume\"\n                min={0.01}\n                max={1}\n                step={0.025}\n                defaultValue={volume}\n                onChange={onVolumeChange}\n                sx={{ width: 100 }}\n              />\n              <VolumeUp />\n            </Box>\n          </Grid>\n        </Grid>\n      </div>\n      {/* The Below Form is using standard HTML w/ Javascript references. Not the Cleanest. Potential for improvement is to get into react style. */}\n      <p id=\"subtitle\" className=\"text-center text-info\">\n        &nbsp;\n      </p>\n      <form id=\"label-form\" name=\"edit\">\n        <div class=\"col-sm-3 form-group region-times\">\n          {/* <label for=\"start\">Begin</label>\n                    <input className=\"form-control\" id=\"start\" name=\"start\" /> */}\n          <TextField\n            id=\"start\"\n            label=\"Region Start\"\n            defaultValue=\"\"\n            variant=\"outlined\"\n            size=\"small\"\n            InputProps={{\n              readOnly: true,\n            }}\n          />\n          {/* <label for=\"end\">End</label> */}\n          {/* <input className=\"form-control\" id=\"end\" name=\"end\" /> */}\n          <TextField\n            id=\"end\"\n            label=\"Region End\"\n            defaultValue=\"\"\n            variant=\"outlined\"\n            size=\"small\"\n            InputProps={{\n              readOnly: true,\n            }}\n          />\n        </div>\n\n        <div className=\"col-sm-6 form-group\">\n          <TextField\n            required\n            id=\"note\"\n            name=\"note\"\n            className=\"form-control\"\n            label=\"Label\"\n            defaultValue=\"\"\n            helperText=\"Please add your annotation above\"\n            variant=\"filled\"\n          />\n          {/* <textarea id=\"note\" className=\"form-control\" rows=\"3\" name=\"note\"></textarea> */}\n        </div>\n\n        <div className=\"col-sm-3\" id=\"save-delete\">\n          <center>\n            <b>Region edit</b>\n          </center>\n          <MuiButton\n            type=\"submit\"\n            onClick={() => {\n              saveRegions();\n            }}\n            className=\"btn btn-success btn-block\"\n            variant=\"contained\"\n            color=\"success\"\n          >\n            Save\n          </MuiButton>\n          <center>\n            <b>or</b>\n          </center>\n          <MuiButton\n            onClick={() => {\n              let form = document.forms.edit;\n              let regionId = form.dataset.region;\n              if (regionId) {\n                wavesurfer.current.regions.list[regionId].remove();\n                form.reset();\n              }\n            }}\n            className=\"btn btn-danger btn-block\"\n            variant=\"contained\"\n            color=\"error\"\n          >\n            Delete\n          </MuiButton>\n        </div>\n      </form>\n      <div>\n        {/* <MuiButton\n          onClick={() => {\n            testDynamo();\n          }}\n        >\n          Test\n        </MuiButton> */}\n        <MuiButton onCLick={() => {}}>Test DB Exporting</MuiButton>\n      </div>\n    </div>\n  );\n};\nSpectrogramview.defaultProps = {\n  // location: {state: 'https://ia902606.us.archive.org/35/items/shortpoetry_047_librivox/song_cjrg_teasdale_64kb.mp3' }\n  link: \"https://ia902606.us.archive.org/35/items/shortpoetry_047_librivox/song_cjrg_teasdale_64kb.mp3\",\n\n  filename: \"3113.flac\",\n\n  zoom: 100,\n};\n\nexport default Spectrogramview;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}