{"ast":null,"code":"import _slicedToArray from \"/Users/Junhaeng/untitled folder/junior-design/amplifyapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/Junhaeng/untitled folder/junior-design/amplifyapp/src/components/Spectrogramview.js\",\n  _this = this,\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from \"react\";\nimport WaveSurfer from \"wavesurfer.js\";\nimport SpectrogramPlugin from \"wavesurfer.js/src/plugin/spectrogram\";\nimport RegionsPlugin from \"wavesurfer.js/src/plugin/regions\";\n// import CursorPlugin from \"wavesurfer.js/src/plugin/cursor\";\n//import TimelinePlugin from \"wavesurfer.js/src/plugin/timeline\";\nimport createColormap from \"colormap\";\nimport \"./Spectrogramview.css\";\nimport PropTypes from \"prop-types\";\nimport { useLocation } from \"react-router-dom\";\nimport Button from \"./Button\";\n\n/* Mui imports for designing */\nimport { createTheme, ThemeProvider } from \"@mui/material/styles\";\nimport Box from \"@mui/material/Box\";\nimport Stack from \"@mui/material/Stack\";\nimport TextField from \"@mui/material/TextField\";\nimport Slider from \"@mui/material/Slider\";\nimport Radio from \"@mui/material/Radio\";\nimport { Button as MuiButton } from \"@mui/material\";\nimport ButtonGroup from \"@mui/material/ButtonGroup\";\nimport ToggleButton from \"@mui/material/ToggleButton\";\nimport ToggleButtonGroup from \"@mui/material/ToggleButtonGroup\";\nimport LinearProgress from \"@mui/material/LinearProgress\";\n\n/**Icons from  Mui */\nimport VolumeDown from \"@mui/icons-material/VolumeDown\";\nimport VolumeUp from \"@mui/icons-material/VolumeUp\";\nimport PlayArrowIcon from \"@mui/icons-material/PlayArrow\";\nimport PauseIcon from \"@mui/icons-material/Pause\";\nimport ZoomOutIcon from \"@mui/icons-material/ZoomOut\";\nimport ZoomInIcon from \"@mui/icons-material/ZoomIn\";\nimport { Container, Grid, IconButton } from \"@material-ui/core\";\nimport Storage from \"@aws-amplify/storage\";\nimport { Auth } from \"aws-amplify\";\nimport DynamoAccess from \"functions/dynamoaccess\";\n\n//TO DO: Take file and load regions into Wave\n\n//TO DO: Add Exporting Functionality\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar dyn = new DynamoAccess();\nvar theme = createTheme({\n  palette: {\n    type: \"dark\",\n    primary: {\n      main: \"#3f51b5\"\n    },\n    secondary: {\n      main: \"#f50057\"\n    }\n  }\n});\nvar colors = createColormap({\n  colormap: \"jet\",\n  nshades: 256,\n  format: \"float\"\n});\nconsole.log(colors);\nvar formWaveSurferOptions = function formWaveSurferOptions(ref) {\n  return {\n    container: ref,\n    waveColor: \"#FFFFFF\",\n    progressColor: \"blue\",\n    cursorColor: \"gray\",\n    barWidth: 1,\n    cursorWidth: 5,\n    responsive: true,\n    height: 256,\n    scrollParent: true,\n    fillParent: false,\n    // minPxPerSec: minPx,\n    // If true, normalize by the maximum peak instead of 1.0.\n    normalize: false,\n    // Use the PeakCache to improve rendering speed of large waveforms.\n    partialRender: false,\n    fftSamples: 512,\n    colorMap: colors,\n    plugins: [RegionsPlugin.create({\n      regionsMinLength: 0.01,\n      dragSelection: {\n        slop: 5\n      },\n      color: \"rgba(152,255,152,0.2)\"\n    }),\n    // TimelinePlugin.create({\n    //   container: \"#wave-timeline\",\n    // }),\n    SpectrogramPlugin.create({\n      container: \"#wave-spectrogram\",\n      labels: false,\n      deferInit: false,\n      colorMap: colors\n    })]\n  };\n};\n\n//Function that handles the rendering of spectrogram when component ismounted\nvar Spectrogramview = function Spectrogramview(_ref) {\n  _s();\n  var link = _ref.link,\n    filename = _ref.filename,\n    zoom = _ref.zoom;\n  var username;\n\n  // TODO: Looking at ways to use different authentication levels for Admins, Reviewers, Labelers, etc.\n  Auth.currentAuthenticatedUser().then(function (data) {\n    var idToken = data;\n    username = idToken.username;\n  }).catch(function (err) {\n    return console.log(err);\n  }); // Need to add alert if username doesnt exist for this user.\n\n  // const url = 'http://ia902606.us.archive.org/35/items/shortpoetry_047_librivox/song_cjrg_teasdale_64kb.mp3'\n\n  var waveformRef = useRef(null);\n  var wavesurfer = useRef(null);\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    ready = _useState2[0],\n    setReady = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    playing = _useState4[0],\n    setPlay = _useState4[1];\n  // const [volume, setVolume] = useState(0.5);\n  // const [currZoom, setZoom] = useState(zoom);\n  // const [allRegions, setRegions] = useState([]);\n  // const [showForm, setShowForm] = useState(false);\n\n  var location = useLocation();\n  if (location.state !== undefined) {\n    link = location.state.link;\n    filename = location.state.file;\n  }\n  var changeReady = function changeReady() {\n    setReady(!ready);\n  };\n\n  // const zoomChange = (event, newZoom) => {\n  //   zoom = event.target.value;\n  //   setZoom(newZoom);\n  // };\n\n  // const controlZoom = (item) => ({\n  //   checked: currZoom === item,\n  //   onChange: zoomChange,\n  //   value: item,\n  //   name: \"zoom-radio-button\",\n  //   inputProps: { \"aria-label\": item },\n  // });\n\n  // function testDynamo() {\n  //   let dyn = new DynamoAccess();\n  //   console.log(\"Dynamo connecting...\");\n  //   dyn.connect().then((res) => dyn.listTables());\n  //   // dyn.listTables();\n  // }\n  // function testDynamoInsert() {\n  //   /* TO DO */\n  // }\n\n  useEffect(function () {\n    var script = document.createElement(\"script\");\n    script.src = \"/public/wavesurfer.js\";\n    script.async = true;\n    document.body.appendChild(script);\n    setPlay(false);\n    if (waveformRef.current) {\n      var options = formWaveSurferOptions(waveformRef.current);\n      wavesurfer.current = WaveSurfer.create(options);\n    }\n\n    //Will load open source poetry as default...\n    wavesurfer.current.load(link);\n    wavesurfer.current.on(\"ready\", function () {\n      wavesurfer.current.spectrogram.init();\n      wavesurfer.current.play();\n    });\n\n    // wavesurfer.current.on(\"ready\", function () {\n    //   if (wavesurfer.current) {\n    //     wavesurfer.current.setVolume(volume);\n    //     setVolume(volume);\n    //   }\n    //   if (allRegions) {\n    //     loadRegions(allRegions);\n    //   }\n    // });\n\n    // wavesurfer.current.on(\"region-click\", function (region, e) {\n    //   console.log(region.start);\n    //   console.log(region.end);\n    //   e.stopPropagation();\n    //   // wavesurfer.current.\n    //   wavesurfer.current.play(region.start, region.end);\n    //   setPlay(!playing);\n    // });\n\n    // hideShowNote();\n\n    // wavesurfer.current.on(\"region-click\", editAnnotation);\n    // wavesurfer.current.on(\"region-update-end\", saveRegions);\n    // wavesurfer.current.on(\"region-updated\", saveRegions);\n    // wavesurfer.current.on(\"region-removed\", saveRegions);\n    // wavesurfer.current.on(\"region-in\", showNote);\n    // wavesurfer.current.on(\"region-out\", hideNote);\n    // // Removes events, elements and disconnects Web Audio nodes.\n    // // when component unmount\n    // return () => wavesurfer.current.destroy();\n  }, [link, currZoom]);\n  var handlePlayPause = function handlePlayPause() {\n    setPlay(!playing);\n    wavesurfer.current.playPause();\n  };\n  var handlePlay = function handlePlay() {\n    wavesurfer.current.play();\n  };\n  var handlePause = function handlePause() {\n    wavesurfer.current.pause();\n  };\n  var onVolumeChange = function onVolumeChange(e) {\n    var target = e.target;\n    var newVolume = +target.value;\n    if (newVolume) {\n      setVolume(newVolume);\n      wavesurfer.current.setVolume(newVolume || 1);\n    }\n  };\n  var onZoomChange = function onZoomChange(e) {\n    var target = e.target;\n    var newZoom = +target.value;\n    if (newZoom) {\n      wavesurfer.current.zoom(target.value);\n    }\n  };\n  function saveRegions() {\n    //  hideShowNote();\n    localStorage.regions = JSON.stringify(Object.keys(wavesurfer.current.regions.list).map(function (id) {\n      var region = wavesurfer.current.regions.list[id];\n      return {\n        start: region.start,\n        end: region.end,\n        attributes: region.attributes,\n        data: region.data\n      };\n    }));\n  }\n  function exportLabels() {\n    var tag = username.substr(0, 4);\n    var labels_to_string = \"\";\n    JSON.stringify(Object.keys(wavesurfer.current.regions.list).map(function (id) {\n      var region = wavesurfer.current.regions.list[id];\n      labels_to_string = labels_to_string + region.start + \"\\t\" + region.end + \"\\t\" + region.data.note + \"\\n\";\n      return {};\n    }));\n    console.log(labels_to_string);\n    Storage.put((\"exported_app_files\" + \"/\" + filename).replace(\".flac\", \"_\" + tag + \".txt\"),\n    //   JSON.stringify(\n    //     Object.keys(wavesurfer.current.regions.list).map(function(id) {\n    //         let region = wavesurfer.current.regions.list[id];\n\n    //         return {\n    //             start: region.start,\n    //             end: region.end,\n    //             attributes: region.attributes,\n    //             data: region.data\n    //         };\n    // }))\n    labels_to_string).then(function (result) {\n      return console.log(result);\n    }).catch(function (err) {\n      return console.log(err);\n    });\n  }\n\n  /**\n   * Load regions from storage.\n   */\n  function loadRegions(regions) {\n    regions.forEach(function (region) {\n      // region.color = randomColor(0.25);\n      wavesurfer.current.addRegion(region);\n    });\n  }\n  function hideShowNote() {\n    var label = document.getElementById(\"label-form\");\n    if (label.style.display === \"none\") {\n      label.style.display = \"block\";\n    } else {\n      label.style.display = \"none\";\n    }\n  }\n  function editAnnotation(region) {\n    hideShowNote();\n    var form = document.forms.edit;\n    form.style.opacity = 1;\n    form.elements.start.value = region.start * 100 / 100;\n    form.elements.end.value = region.end * 100 / 100;\n    form.elements.note.value = region.data.note || \"\";\n    form.onsubmit = function (e) {\n      hideShowNote();\n      e.preventDefault();\n      region.update({\n        start: form.elements.start.value,\n        end: form.elements.end.value,\n        data: {\n          note: form.elements.note.value\n        }\n      });\n      if (!allRegions) {\n        setRegions([region]);\n      } else {\n        var arr = allRegions;\n        arr[allRegions.length] = region;\n        setRegions(arr);\n      }\n      console.log(allRegions);\n      form.style.opacity = 0;\n    };\n    form.onreset = function () {\n      form.style.opacity = 0;\n      form.dataset.region = null;\n    };\n    form.dataset.region = region.id;\n  }\n  function showNote(region) {\n    if (!showNote.el) {\n      showNote.el = document.querySelector(\"#subtitle\");\n    }\n    showNote.el.style.color = \"Red\";\n    showNote.el.style.fontSize = \"large\";\n    showNote.el.textContent = region.data.note || \"–\";\n  }\n  function hideNote(region) {\n    if (!hideNote.el) {\n      hideNote.el = document.querySelector(\"#subtitle\");\n    }\n    hideNote.el.style.color = \"Red\";\n    hideNote.el.style.fontSize = \"large\";\n    hideNote.el.textContent = \"–\";\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"spectrogram\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fileName\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Current File: \", filename]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 376,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 375,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"upperControls\",\n      children: /*#__PURE__*/_jsxDEV(ThemeProvider, {\n        theme: theme,\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          direction: \"row\",\n          spacing: 8,\n          justifyContent: \"center\"\n          // spacing={2}\n          ,\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            children: /*#__PURE__*/_jsxDEV(ButtonGroup, {\n              variant: \"contained\",\n              \"aria-label\": \"outlined primary button group\",\n              children: [/*#__PURE__*/_jsxDEV(MuiButton, {\n                \"aria-label\": \"play\",\n                size: \"large\",\n                color: \"primary\",\n                onClick: handlePlay,\n                children: /*#__PURE__*/_jsxDEV(PlayArrowIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 398,\n                  columnNumber: 19\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 392,\n                columnNumber: 17\n              }, _this), /*#__PURE__*/_jsxDEV(MuiButton, {\n                \"aria-label\": \"pause\",\n                size: \"large\",\n                color: \"secondary\",\n                onClick: handlePause,\n                children: /*#__PURE__*/_jsxDEV(PauseIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 406,\n                  columnNumber: 19\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 400,\n                columnNumber: 17\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 388,\n              columnNumber: 15\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 387,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            children: /*#__PURE__*/_jsxDEV(MuiButton, {\n              color: \"secondary\",\n              variant: \"contained\",\n              size: \"large\",\n              onClick: exportLabels,\n              className: \"ExportBtn\",\n              children: \"Export\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 412,\n              columnNumber: 15\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 411,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 380,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 379,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 378,\n      columnNumber: 7\n    }, _this), \"dddd\", /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"waveform\",\n      ref: waveformRef,\n      className: \"audio_visual\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 426,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-sm-3\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 427,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"lowerControls\",\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: 8,\n        justifyContent: \"center\",\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          children: /*#__PURE__*/_jsxDEV(ToggleButtonGroup, {\n            \"aria-label\": \"outlined primary button group\",\n            color: \"secondary\",\n            value: currZoom,\n            exclusive: true,\n            onChange: zoomChange,\n            children: [/*#__PURE__*/_jsxDEV(ToggleButton, {\n              value: \"100\",\n              children: \"100px\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 438,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(ToggleButton, {\n              value: \"250\",\n              children: \"250px\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 439,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(ToggleButton, {\n              value: \"500\",\n              children: \"500px\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 440,\n              columnNumber: 15\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 431,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 430,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          children: /*#__PURE__*/_jsxDEV(Box, {\n            children: [/*#__PURE__*/_jsxDEV(VolumeDown, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 447,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(Slider, {\n              \"aria-label\": \"Volume\",\n              min: 0.01,\n              max: 1,\n              step: 0.025,\n              defaultValue: volume,\n              onChange: onVolumeChange,\n              sx: {\n                width: 100\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 448,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(VolumeUp, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 457,\n              columnNumber: 15\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 446,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 445,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 429,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 428,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n      id: \"subtitle\",\n      className: \"text-center text-info\",\n      children: \"\\xA0\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 463,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"form\", {\n      id: \"label-form\",\n      name: \"edit\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"col-sm-3 form-group region-times\",\n        children: [/*#__PURE__*/_jsxDEV(TextField, {\n          id: \"start\",\n          label: \"Region Start\",\n          defaultValue: \"\",\n          variant: \"outlined\",\n          size: \"small\",\n          InputProps: {\n            readOnly: true\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 470,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(TextField, {\n          id: \"end\",\n          label: \"Region End\",\n          defaultValue: \"\",\n          variant: \"outlined\",\n          size: \"small\",\n          InputProps: {\n            readOnly: true\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 482,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 467,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-sm-6 form-group\",\n        children: /*#__PURE__*/_jsxDEV(TextField, {\n          required: true,\n          id: \"note\",\n          name: \"note\",\n          className: \"form-control\",\n          label: \"Label\",\n          defaultValue: \"\",\n          helperText: \"Please add your annotation above\",\n          variant: \"filled\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 495,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 494,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-sm-3\",\n        id: \"save-delete\",\n        children: [/*#__PURE__*/_jsxDEV(\"center\", {\n          children: /*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"Region edit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 510,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 509,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(MuiButton, {\n          type: \"submit\",\n          onClick: function onClick() {\n            saveRegions();\n          },\n          className: \"btn btn-success btn-block\",\n          variant: \"contained\",\n          color: \"success\",\n          children: \"Save\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 512,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"center\", {\n          children: /*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"or\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 524,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 523,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(MuiButton, {\n          onClick: function onClick() {\n            var form = document.forms.edit;\n            var regionId = form.dataset.region;\n            if (regionId) {\n              wavesurfer.current.regions.list[regionId].remove();\n              form.reset();\n            }\n          },\n          className: \"btn btn-danger btn-block\",\n          variant: \"contained\",\n          color: \"error\",\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 526,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 508,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 466,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(MuiButton, {\n        onCLick: function onCLick() {},\n        children: \"Test DB Exporting\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 551,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 543,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 374,\n    columnNumber: 5\n  }, _this);\n};\n_s(Spectrogramview, \"JKhWWwcm1f5Sr8z2ACdLg2eugTA=\", false, function () {\n  return [useLocation];\n});\n_c = Spectrogramview;\nSpectrogramview.defaultProps = {\n  // location: {state: 'https://ia902606.us.archive.org/35/items/shortpoetry_047_librivox/song_cjrg_teasdale_64kb.mp3' }\n  link: \"https://ia902606.us.archive.org/35/items/shortpoetry_047_librivox/song_cjrg_teasdale_64kb.mp3\",\n  filename: \"3113.flac\",\n  zoom: 100\n};\nexport default Spectrogramview;\nvar _c;\n$RefreshReg$(_c, \"Spectrogramview\");","map":{"version":3,"names":["React","useEffect","useRef","useState","WaveSurfer","SpectrogramPlugin","RegionsPlugin","createColormap","PropTypes","useLocation","Button","createTheme","ThemeProvider","Box","Stack","TextField","Slider","Radio","MuiButton","ButtonGroup","ToggleButton","ToggleButtonGroup","LinearProgress","VolumeDown","VolumeUp","PlayArrowIcon","PauseIcon","ZoomOutIcon","ZoomInIcon","Container","Grid","IconButton","Storage","Auth","DynamoAccess","jsxDEV","_jsxDEV","dyn","theme","palette","type","primary","main","secondary","colors","colormap","nshades","format","console","log","formWaveSurferOptions","ref","container","waveColor","progressColor","cursorColor","barWidth","cursorWidth","responsive","height","scrollParent","fillParent","normalize","partialRender","fftSamples","colorMap","plugins","create","regionsMinLength","dragSelection","slop","color","labels","deferInit","Spectrogramview","_ref","_s","link","filename","zoom","username","currentAuthenticatedUser","then","data","idToken","catch","err","waveformRef","wavesurfer","_useState","_useState2","_slicedToArray","ready","setReady","_useState3","_useState4","playing","setPlay","location","state","undefined","file","changeReady","script","document","createElement","src","async","body","appendChild","current","options","load","on","spectrogram","init","play","currZoom","handlePlayPause","playPause","handlePlay","handlePause","pause","onVolumeChange","e","target","newVolume","value","setVolume","onZoomChange","newZoom","saveRegions","localStorage","regions","JSON","stringify","Object","keys","list","map","id","region","start","end","attributes","exportLabels","tag","substr","labels_to_string","note","put","replace","result","loadRegions","forEach","addRegion","hideShowNote","label","getElementById","style","display","editAnnotation","form","forms","edit","opacity","elements","onsubmit","preventDefault","update","allRegions","setRegions","arr","length","onreset","dataset","showNote","el","querySelector","fontSize","textContent","hideNote","className","children","fileName","_jsxFileName","lineNumber","columnNumber","_this","direction","spacing","justifyContent","item","variant","size","onClick","exclusive","onChange","zoomChange","min","max","step","defaultValue","volume","sx","width","name","class","InputProps","readOnly","required","helperText","regionId","remove","reset","onCLick","_c","defaultProps","$RefreshReg$"],"sources":["/Users/Junhaeng/untitled folder/junior-design/amplifyapp/src/components/Spectrogramview.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\n\nimport WaveSurfer from \"wavesurfer.js\";\nimport SpectrogramPlugin from \"wavesurfer.js/src/plugin/spectrogram\";\nimport RegionsPlugin from \"wavesurfer.js/src/plugin/regions\";\n// import CursorPlugin from \"wavesurfer.js/src/plugin/cursor\";\n//import TimelinePlugin from \"wavesurfer.js/src/plugin/timeline\";\nimport createColormap from \"colormap\";\nimport \"./Spectrogramview.css\";\nimport PropTypes from \"prop-types\";\nimport { useLocation } from \"react-router-dom\";\nimport Button from \"./Button\";\n\n/* Mui imports for designing */\nimport { createTheme, ThemeProvider } from \"@mui/material/styles\";\nimport Box from \"@mui/material/Box\";\nimport Stack from \"@mui/material/Stack\";\nimport TextField from \"@mui/material/TextField\";\nimport Slider from \"@mui/material/Slider\";\nimport Radio from \"@mui/material/Radio\";\nimport { Button as MuiButton } from \"@mui/material\";\nimport ButtonGroup from \"@mui/material/ButtonGroup\";\nimport ToggleButton from \"@mui/material/ToggleButton\";\nimport ToggleButtonGroup from \"@mui/material/ToggleButtonGroup\";\nimport LinearProgress from \"@mui/material/LinearProgress\";\n\n/**Icons from  Mui */\nimport VolumeDown from \"@mui/icons-material/VolumeDown\";\nimport VolumeUp from \"@mui/icons-material/VolumeUp\";\nimport PlayArrowIcon from \"@mui/icons-material/PlayArrow\";\nimport PauseIcon from \"@mui/icons-material/Pause\";\nimport ZoomOutIcon from \"@mui/icons-material/ZoomOut\";\nimport ZoomInIcon from \"@mui/icons-material/ZoomIn\";\nimport { Container, Grid, IconButton } from \"@material-ui/core\";\n\nimport Storage from \"@aws-amplify/storage\";\n\nimport { Auth } from \"aws-amplify\";\nimport DynamoAccess from \"functions/dynamoaccess\";\n\n//TO DO: Take file and load regions into Wave\n\n//TO DO: Add Exporting Functionality\nconst dyn = new DynamoAccess();\n\nconst theme = createTheme({\n  palette: {\n    type: \"dark\",\n    primary: {\n      main: \"#3f51b5\",\n    },\n    secondary: {\n      main: \"#f50057\",\n    },\n  },\n});\n\nconst colors = createColormap({\n  colormap: \"jet\",\n  nshades: 256,\n  format: \"float\",\n});\nconsole.log(colors);\nconst formWaveSurferOptions = (ref) => ({\n  container: ref,\n  waveColor: \"#FFFFFF\",\n  progressColor: \"blue\",\n  cursorColor: \"gray\",\n  barWidth: 1,\n  cursorWidth: 5,\n  responsive: true,\n  height: 256,\n  scrollParent: true,\n  fillParent: false,\n  // minPxPerSec: minPx,\n  // If true, normalize by the maximum peak instead of 1.0.\n  normalize: false,\n  // Use the PeakCache to improve rendering speed of large waveforms.\n  partialRender: false,\n  fftSamples: 512,\n  colorMap: colors,\n  plugins: [\n    RegionsPlugin.create({\n      regionsMinLength: 0.01,\n      dragSelection: {\n        slop: 5,\n      },\n      color: \"rgba(152,255,152,0.2)\",\n    }),\n    // TimelinePlugin.create({\n    //   container: \"#wave-timeline\",\n    // }),\n    SpectrogramPlugin.create({\n      container: \"#wave-spectrogram\",\n      labels: false,\n      deferInit: false,\n      colorMap: colors,\n    }),\n  ],\n});\n\n//Function that handles the rendering of spectrogram when component ismounted\nconst Spectrogramview = ({ link, filename, zoom }) => {\n  var username;\n\n  // TODO: Looking at ways to use different authentication levels for Admins, Reviewers, Labelers, etc.\n  Auth.currentAuthenticatedUser()\n    .then((data) => {\n      let idToken = data;\n      username = idToken.username;\n    })\n    .catch((err) => console.log(err)); // Need to add alert if username doesnt exist for this user.\n\n  // const url = 'http://ia902606.us.archive.org/35/items/shortpoetry_047_librivox/song_cjrg_teasdale_64kb.mp3'\n\n  const waveformRef = useRef(null);\n  const wavesurfer = useRef(null);\n  const [ready, setReady] = useState(false);\n  const [playing, setPlay] = useState(false);\n  // const [volume, setVolume] = useState(0.5);\n  // const [currZoom, setZoom] = useState(zoom);\n  // const [allRegions, setRegions] = useState([]);\n  // const [showForm, setShowForm] = useState(false);\n\n  let location = useLocation();\n\n  if (location.state !== undefined) {\n    link = location.state.link;\n    filename = location.state.file;\n  }\n\n  const changeReady = () => {\n    setReady(!ready);\n  };\n\n  // const zoomChange = (event, newZoom) => {\n  //   zoom = event.target.value;\n  //   setZoom(newZoom);\n  // };\n\n  // const controlZoom = (item) => ({\n  //   checked: currZoom === item,\n  //   onChange: zoomChange,\n  //   value: item,\n  //   name: \"zoom-radio-button\",\n  //   inputProps: { \"aria-label\": item },\n  // });\n\n  // function testDynamo() {\n  //   let dyn = new DynamoAccess();\n  //   console.log(\"Dynamo connecting...\");\n  //   dyn.connect().then((res) => dyn.listTables());\n  //   // dyn.listTables();\n  // }\n  // function testDynamoInsert() {\n  //   /* TO DO */\n  // }\n\n  useEffect(() => {\n    const script = document.createElement(\"script\");\n    script.src = \"/public/wavesurfer.js\";\n    script.async = true;\n    document.body.appendChild(script);\n\n    setPlay(false);\n\n    if (waveformRef.current) {\n      const options = formWaveSurferOptions(waveformRef.current);\n      wavesurfer.current = WaveSurfer.create(options);\n    }\n\n    //Will load open source poetry as default...\n    wavesurfer.current.load(link);\n\n    wavesurfer.current.on(\"ready\", () => {\n      wavesurfer.current.spectrogram.init();\n      wavesurfer.current.play();\n    });\n\n    // wavesurfer.current.on(\"ready\", function () {\n    //   if (wavesurfer.current) {\n    //     wavesurfer.current.setVolume(volume);\n    //     setVolume(volume);\n    //   }\n    //   if (allRegions) {\n    //     loadRegions(allRegions);\n    //   }\n    // });\n\n    // wavesurfer.current.on(\"region-click\", function (region, e) {\n    //   console.log(region.start);\n    //   console.log(region.end);\n    //   e.stopPropagation();\n    //   // wavesurfer.current.\n    //   wavesurfer.current.play(region.start, region.end);\n    //   setPlay(!playing);\n    // });\n\n    // hideShowNote();\n\n    // wavesurfer.current.on(\"region-click\", editAnnotation);\n    // wavesurfer.current.on(\"region-update-end\", saveRegions);\n    // wavesurfer.current.on(\"region-updated\", saveRegions);\n    // wavesurfer.current.on(\"region-removed\", saveRegions);\n    // wavesurfer.current.on(\"region-in\", showNote);\n    // wavesurfer.current.on(\"region-out\", hideNote);\n    // // Removes events, elements and disconnects Web Audio nodes.\n    // // when component unmount\n    // return () => wavesurfer.current.destroy();\n  }, [link, currZoom]);\n\n  const handlePlayPause = () => {\n    setPlay(!playing);\n    wavesurfer.current.playPause();\n  };\n\n  const handlePlay = () => {\n    wavesurfer.current.play();\n  };\n\n  const handlePause = () => {\n    wavesurfer.current.pause();\n  };\n\n  const onVolumeChange = (e) => {\n    const { target } = e;\n    const newVolume = +target.value;\n\n    if (newVolume) {\n      setVolume(newVolume);\n      wavesurfer.current.setVolume(newVolume || 1);\n    }\n  };\n\n  const onZoomChange = (e) => {\n    const { target } = e;\n    const newZoom = +target.value;\n\n    if (newZoom) {\n      wavesurfer.current.zoom(target.value);\n    }\n  };\n\n  function saveRegions() {\n    //  hideShowNote();\n    localStorage.regions = JSON.stringify(\n      Object.keys(wavesurfer.current.regions.list).map(function (id) {\n        let region = wavesurfer.current.regions.list[id];\n        return {\n          start: region.start,\n          end: region.end,\n          attributes: region.attributes,\n          data: region.data,\n        };\n      })\n    );\n  }\n\n  function exportLabels() {\n    var tag = username.substr(0, 4);\n\n    var labels_to_string = \"\";\n\n    JSON.stringify(\n      Object.keys(wavesurfer.current.regions.list).map(function (id) {\n        let region = wavesurfer.current.regions.list[id];\n        labels_to_string =\n          labels_to_string +\n          region.start +\n          \"\\t\" +\n          region.end +\n          \"\\t\" +\n          region.data.note +\n          \"\\n\";\n        return {};\n      })\n    );\n    console.log(labels_to_string);\n    Storage.put(\n      (\"exported_app_files\" + \"/\" + filename).replace(\n        \".flac\",\n        \"_\" + tag + \".txt\"\n      ),\n      //   JSON.stringify(\n      //     Object.keys(wavesurfer.current.regions.list).map(function(id) {\n      //         let region = wavesurfer.current.regions.list[id];\n\n      //         return {\n      //             start: region.start,\n      //             end: region.end,\n      //             attributes: region.attributes,\n      //             data: region.data\n      //         };\n      // }))\n      labels_to_string\n    )\n      .then((result) => console.log(result))\n      .catch((err) => console.log(err));\n  }\n\n  /**\n   * Load regions from storage.\n   */\n  function loadRegions(regions) {\n    regions.forEach(function (region) {\n      // region.color = randomColor(0.25);\n      wavesurfer.current.addRegion(region);\n    });\n  }\n\n  function hideShowNote() {\n    let label = document.getElementById(\"label-form\");\n    if (label.style.display === \"none\") {\n      label.style.display = \"block\";\n    } else {\n      label.style.display = \"none\";\n    }\n  }\n\n  function editAnnotation(region) {\n    hideShowNote();\n\n    let form = document.forms.edit;\n    form.style.opacity = 1;\n    form.elements.start.value = (region.start * 100) / 100;\n    form.elements.end.value = (region.end * 100) / 100;\n    form.elements.note.value = region.data.note || \"\";\n    form.onsubmit = function (e) {\n      hideShowNote();\n      e.preventDefault();\n      region.update({\n        start: form.elements.start.value,\n        end: form.elements.end.value,\n        data: {\n          note: form.elements.note.value,\n        },\n      });\n      if (!allRegions) {\n        setRegions([region]);\n      } else {\n        var arr = allRegions;\n        arr[allRegions.length] = region;\n        setRegions(arr);\n      }\n      console.log(allRegions);\n      form.style.opacity = 0;\n    };\n    form.onreset = function () {\n      form.style.opacity = 0;\n      form.dataset.region = null;\n    };\n    form.dataset.region = region.id;\n  }\n\n  function showNote(region) {\n    if (!showNote.el) {\n      showNote.el = document.querySelector(\"#subtitle\");\n    }\n    showNote.el.style.color = \"Red\";\n    showNote.el.style.fontSize = \"large\";\n    showNote.el.textContent = region.data.note || \"–\";\n  }\n\n  function hideNote(region) {\n    if (!hideNote.el) {\n      hideNote.el = document.querySelector(\"#subtitle\");\n    }\n    hideNote.el.style.color = \"Red\";\n    hideNote.el.style.fontSize = \"large\";\n    hideNote.el.textContent = \"–\";\n  }\n\n  return (\n    <div className=\"spectrogram\">\n      <div className=\"fileName\">\n        <p>Current File: {filename}</p>\n      </div>\n      <div className=\"upperControls\">\n        <ThemeProvider theme={theme}>\n          <Grid\n            container\n            direction=\"row\"\n            spacing={8}\n            justifyContent=\"center\"\n            // spacing={2}\n          >\n            <Grid item>\n              <ButtonGroup\n                variant=\"contained\"\n                aria-label=\"outlined primary button group\"\n              >\n                <MuiButton\n                  aria-label=\"play\"\n                  size=\"large\"\n                  color=\"primary\"\n                  onClick={handlePlay}\n                >\n                  <PlayArrowIcon />\n                </MuiButton>\n                <MuiButton\n                  aria-label=\"pause\"\n                  size=\"large\"\n                  color=\"secondary\"\n                  onClick={handlePause}\n                >\n                  <PauseIcon />\n                </MuiButton>\n              </ButtonGroup>\n            </Grid>\n\n            <Grid item>\n              <MuiButton\n                color=\"secondary\"\n                variant=\"contained\"\n                size=\"large\"\n                onClick={exportLabels}\n                className=\"ExportBtn\"\n              >\n                Export\n              </MuiButton>\n            </Grid>\n          </Grid>\n        </ThemeProvider>\n      </div>\n      dddd\n      <div id=\"waveform\" ref={waveformRef} className=\"audio_visual\" />\n      <div className=\"col-sm-3\"></div>\n      <div className=\"lowerControls\">\n        <Grid container spacing={8} justifyContent=\"center\">\n          <Grid item>\n            <ToggleButtonGroup\n              aria-label=\"outlined primary button group\"\n              color=\"secondary\"\n              value={currZoom}\n              exclusive\n              onChange={zoomChange}\n            >\n              <ToggleButton value={\"100\"}>100px</ToggleButton>\n              <ToggleButton value={\"250\"}>250px</ToggleButton>\n              <ToggleButton value={\"500\"}>500px</ToggleButton>\n            </ToggleButtonGroup>\n            {/* </ Box> */}\n          </Grid>\n          {/* <Grid container spacing = {12}> */}\n          <Grid item>\n            <Box>\n              <VolumeDown />\n              <Slider\n                aria-label=\"Volume\"\n                min={0.01}\n                max={1}\n                step={0.025}\n                defaultValue={volume}\n                onChange={onVolumeChange}\n                sx={{ width: 100 }}\n              />\n              <VolumeUp />\n            </Box>\n          </Grid>\n        </Grid>\n      </div>\n      {/* The Below Form is using standard HTML w/ Javascript references. Not the Cleanest. Potential for improvement is to get into react style. */}\n      <p id=\"subtitle\" className=\"text-center text-info\">\n        &nbsp;\n      </p>\n      <form id=\"label-form\" name=\"edit\">\n        <div class=\"col-sm-3 form-group region-times\">\n          {/* <label for=\"start\">Begin</label>\n                    <input className=\"form-control\" id=\"start\" name=\"start\" /> */}\n          <TextField\n            id=\"start\"\n            label=\"Region Start\"\n            defaultValue=\"\"\n            variant=\"outlined\"\n            size=\"small\"\n            InputProps={{\n              readOnly: true,\n            }}\n          />\n          {/* <label for=\"end\">End</label> */}\n          {/* <input className=\"form-control\" id=\"end\" name=\"end\" /> */}\n          <TextField\n            id=\"end\"\n            label=\"Region End\"\n            defaultValue=\"\"\n            variant=\"outlined\"\n            size=\"small\"\n            InputProps={{\n              readOnly: true,\n            }}\n          />\n        </div>\n\n        <div className=\"col-sm-6 form-group\">\n          <TextField\n            required\n            id=\"note\"\n            name=\"note\"\n            className=\"form-control\"\n            label=\"Label\"\n            defaultValue=\"\"\n            helperText=\"Please add your annotation above\"\n            variant=\"filled\"\n          />\n          {/* <textarea id=\"note\" className=\"form-control\" rows=\"3\" name=\"note\"></textarea> */}\n        </div>\n\n        <div className=\"col-sm-3\" id=\"save-delete\">\n          <center>\n            <b>Region edit</b>\n          </center>\n          <MuiButton\n            type=\"submit\"\n            onClick={() => {\n              saveRegions();\n            }}\n            className=\"btn btn-success btn-block\"\n            variant=\"contained\"\n            color=\"success\"\n          >\n            Save\n          </MuiButton>\n          <center>\n            <b>or</b>\n          </center>\n          <MuiButton\n            onClick={() => {\n              let form = document.forms.edit;\n              let regionId = form.dataset.region;\n              if (regionId) {\n                wavesurfer.current.regions.list[regionId].remove();\n                form.reset();\n              }\n            }}\n            className=\"btn btn-danger btn-block\"\n            variant=\"contained\"\n            color=\"error\"\n          >\n            Delete\n          </MuiButton>\n        </div>\n      </form>\n      <div>\n        {/* <MuiButton\n          onClick={() => {\n            testDynamo();\n          }}\n        >\n          Test\n        </MuiButton> */}\n        <MuiButton onCLick={() => {}}>Test DB Exporting</MuiButton>\n      </div>\n    </div>\n  );\n};\nSpectrogramview.defaultProps = {\n  // location: {state: 'https://ia902606.us.archive.org/35/items/shortpoetry_047_librivox/song_cjrg_teasdale_64kb.mp3' }\n  link: \"https://ia902606.us.archive.org/35/items/shortpoetry_047_librivox/song_cjrg_teasdale_64kb.mp3\",\n\n  filename: \"3113.flac\",\n\n  zoom: 100,\n};\n\nexport default Spectrogramview;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}