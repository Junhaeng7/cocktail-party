{"ast":null,"code":"import _objectSpread from \"/Users/Junhaeng/Desktop/cocktail/cocktail-party/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport formatErrorMessage from './formatErrorMessage';\n/**\n * Create a data asynchronous validator\n * @param data\n */\nexport function createValidatorAsync(data, name) {\n  function check(errorMessage) {\n    return function (checkResult) {\n      if (checkResult === false) {\n        return {\n          hasError: true,\n          errorMessage: errorMessage\n        };\n      } else if (typeof checkResult === 'object' && (checkResult.hasError || checkResult.array)) {\n        return checkResult;\n      }\n      return null;\n    };\n  }\n  return function (value, rules) {\n    var promises = rules.map(function (rule) {\n      var onValid = rule.onValid,\n        errorMessage = rule.errorMessage,\n        params = rule.params;\n      return Promise.resolve(onValid(value, data, name)).then(check(formatErrorMessage(errorMessage, _objectSpread(_objectSpread({}, params), {}, {\n        name: Array.isArray(name) ? name.join('.') : name\n      }))));\n    });\n    return Promise.all(promises).then(function (results) {\n      return results.find(function (item) {\n        return item && (item === null || item === void 0 ? void 0 : item.hasError);\n      });\n    });\n  };\n}\nexport default createValidatorAsync;","map":{"version":3,"sources":["../../src/utils/createValidatorAsync.ts"],"names":[],"mappings":";AACA,OAAO,kBAAkB,MAAM,sBAAsB;AAErD;;;AAGG;AACH,OAAM,SAAU,oBAAoB,CAAU,IAAQ,EAAE,IAAwB,EAAA;EAC9E,SAAS,KAAK,CAAC,YAAyB,EAAA;IACtC,OAAO,UAAC,WAAqC,EAA2B;MACtE,IAAI,WAAW,KAAK,KAAK,EAAE;QACzB,OAAO;UAAE,QAAQ,EAAE,IAAI;UAAE,YAAY,EAAZ;QAAY,CAAE;OACxC,MAAM,IAAI,OAAO,WAAW,KAAK,QAAQ,KAAK,WAAW,CAAC,QAAQ,IAAI,WAAW,CAAC,KAAK,CAAC,EAAE;QACzF,OAAO,WAAW;MACnB;MACD,OAAO,IAAI;IACb,CAAC;EACH;EAEA,OAAO,UAAC,KAAQ,EAAE,KAA0B,EAAI;IAC9C,IAAM,QAAQ,GAAG,KAAK,CAAC,GAAG,CAAC,UAAA,IAAI,EAAG;MAChC,IAAQ,OAAO,GAA2B,IAAI,CAAtC,OAAO;QAAE,YAAY,GAAa,IAAI,CAA7B,YAAY;QAAE,MAAM,GAAK,IAAI,CAAf,MAAM;MACrC,OAAO,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,KAAK,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CACrD,KAAK,CACH,kBAAkB,CAAI,YAAY,EAAA,aAAA,CAAA,aAAA,KAC7B,MAAM;QACT,IAAI,EAAE,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG;MAAI,GACjD,CACH,CACF;IACH,CAAC,CAAC;IAEF,OAAO,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,UAAA,OAAO;MAAA,OACvC,OAAO,CAAC,IAAI,CAAC,UAAC,IAA2B;QAAA,OAAK,IAAI,KAAI,IAAI,KAAA,IAAA,IAAJ,IAAI,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAJ,IAAI,CAAE,QAAQ,CAAA;MAAA,EAAC;IAAA,EACtE;EACH,CAAC;AACH;AAEA,eAAe,oBAAoB","sourceRoot":"","sourcesContent":["import formatErrorMessage from './formatErrorMessage';\n/**\n * Create a data asynchronous validator\n * @param data\n */\nexport function createValidatorAsync(data, name) {\n    function check(errorMessage) {\n        return (checkResult) => {\n            if (checkResult === false) {\n                return { hasError: true, errorMessage };\n            }\n            else if (typeof checkResult === 'object' && (checkResult.hasError || checkResult.array)) {\n                return checkResult;\n            }\n            return null;\n        };\n    }\n    return (value, rules) => {\n        const promises = rules.map(rule => {\n            const { onValid, errorMessage, params } = rule;\n            return Promise.resolve(onValid(value, data, name)).then(check(formatErrorMessage(errorMessage, {\n                ...params,\n                name: Array.isArray(name) ? name.join('.') : name\n            })));\n        });\n        return Promise.all(promises).then(results => results.find((item) => item && (item === null || item === void 0 ? void 0 : item.hasError)));\n    };\n}\nexport default createValidatorAsync;\n//# sourceMappingURL=createValidatorAsync.js.map"]},"metadata":{},"sourceType":"module"}